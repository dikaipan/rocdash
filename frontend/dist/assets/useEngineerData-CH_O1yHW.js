import{r as s}from"./vendor-react-DhTDDHjY.js";function u(t,r={}){const{parser:a=null,autoFetch:l=!0,eventName:o=null}=r,[h,g]=s.useState([]),[m,f]=s.useState(l),[w,d]=s.useState(null),c=s.useCallback(async()=>{try{f(!0),d(null);const e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json(),i=a?a(n):n;g(i)}catch(e){console.error(`Error fetching data from ${t}:`,e),d(e.message)}finally{f(!1)}},[t,a]);return s.useEffect(()=>{if(l&&c(),o){let e=null,n=!1;const i=()=>{e&&clearTimeout(e),e=setTimeout(()=>{n||(n=!0,c().then(()=>{n=!1}).catch(()=>{n=!1}))},100)};return window.addEventListener(o,i,{passive:!0}),()=>{e&&clearTimeout(e),window.removeEventListener(o,i)}}},[l,o,c]),{data:h,loading:m,error:w,refetch:c}}function p(){const{data:t,loading:r,error:a}=u("/api/engineers",{eventName:"engineerDataChanged"});return{rows:t,loading:r,error:a}}function v(){const{data:t,loading:r,error:a}=u("/api/machines",{eventName:"machineDataChanged"});return{rows:t,loading:r,error:a}}function E(){const{data:t,loading:r,error:a}=u("/api/stock-parts",{eventName:"stockPartDataChanged"});return{rows:t,loading:r,error:a}}function k(){const{data:t,loading:r,error:a}=u("/api/fsl-locations");return{rows:t,loading:r,error:a}}export{v as a,E as b,k as c,p as u};
