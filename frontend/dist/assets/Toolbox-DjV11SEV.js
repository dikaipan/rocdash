import{r as d,j as e,ab as se,z as de,as as xe,at as ue,au as ie,av as Z,a0 as F,K as Q,P as ee,X as ae,aw as Pe,Q as Be,ax as me,_ as b,a3 as De}from"./vendor-react-mWVLDlSi.js";import{u as ge,c as Ee}from"./index-C95-8iH3.js";import{P as Oe}from"./PageLayout-B5k_nGAE.js";import{u as be,a as pe,C as he}from"./CustomConfirm-DYY_7Abe.js";import"./vendor-maps-C_U1R0uQ.js";const ze=()=>"/api",te=ze(),Me=()=>{const{isDark:t}=ge(),m=be(),[P,p]=d.useState([]),[G,E]=d.useState(!0),[v,re]=d.useState(""),[O,W]=d.useState("gallery"),[le,H]=d.useState(!1),[ne,w]=d.useState(!1),[a,I]=d.useState(null),[T,V]=d.useState(null),[ce,Y]=d.useState("create"),[g,f]=d.useState({tools_name:"",current_stock:0,stock_new:0,stock_old:0,stock_detail:"",photo:"",description:"",uom:"Pcs",remark:"",location:""}),[y,$]=d.useState(null),[L,U]=d.useState(!1),k=d.useRef(!0),B=d.useRef(!1),C=d.useRef(null),z=pe({endpoint:`${te}/tools`,primaryKey:"tools_name",eventName:"toolDataChanged"});d.useEffect(()=>{k.current=!0;const s=async()=>{if(B.current){console.log("[InventoryTools] Fetch already in progress, skipping");return}B.current=!0;try{k.current&&E(!0);const n=await fetch(`${te}/tools`);if(!k.current){B.current=!1;return}const c=n.headers.get("content-type");if(!c||!c.includes("application/json")){const o=await n.text();console.error("[InventoryTools] Expected JSON but got:",c,o.substring(0,100)),k.current&&(p([]),E(!1)),B.current=!1;return}if(n.ok){const o=await n.json();if(!k.current){B.current=!1;return}Array.isArray(o)?p(o):o.data&&Array.isArray(o.data)?p(o.data):o.rows&&Array.isArray(o.rows)?p(o.rows):(console.warn("[InventoryTools] Unexpected data format:",o),p([]))}else{const o=await n.json().catch(()=>({}));console.error("[InventoryTools] Error response:",n.status,o),k.current&&p([])}}catch(n){if(!k.current){B.current=!1;return}console.error("[InventoryTools] Error fetching tools:",n),p([])}finally{k.current&&E(!1),B.current=!1}};s();const l=()=>{C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{console.log("[InventoryTools] Data change event received, fetching..."),s()},500)};return window.addEventListener("toolDataChanged",l),()=>{k.current=!1,C.current&&clearTimeout(C.current),window.removeEventListener("toolDataChanged",l)}},[]);const q=d.useMemo(()=>{let s=P;if(v){const l=v.toLowerCase();s=s.filter(n=>(n.tools_name||n["Part Name"]||n["TOOLS NAME"]||"").toLowerCase().includes(l)||(n.description||n["Detail Specification"]||"").toLowerCase().includes(l)||(n.stock_detail||n["Detail Specification"]||"").toLowerCase().includes(l)||(n.remark||n.Remark||"").toLowerCase().includes(l))}return s},[P,v]),oe=async s=>{var n;const l=(n=s.target.files)==null?void 0:n[0];if(l){if(!l.type.startsWith("image/")){b.error("File harus berupa gambar");return}if(l.size>5*1024*1024){b.error("Ukuran file maksimal 5MB");return}try{U(!0);const c=new FileReader;c.onloadend=()=>{$(c.result)},c.readAsDataURL(l);const o=new FormData;o.append("file",l);const h=await fetch(`${te}/upload-photo`,{method:"POST",body:o});if(!h.ok){const D=await h.json();throw new Error(D.error||"Failed to upload photo")}const _=await h.json();f(D=>({...D,photo:_.path})),$(_.path),b.success("Foto berhasil diunggah")}catch(c){console.error("Error uploading photo:",c),b.error(c.message||"Gagal mengunggah foto"),$(null)}finally{U(!1)}}},K=()=>{f({tools_name:"",current_stock:0,stock_new:0,stock_old:0,stock_detail:"",photo:"",description:"",uom:"Pcs",remark:"",location:""}),$(null),V(null)},S=(s=null)=>{s?(V(s),Y("edit"),f({tools_name:s.tools_name||s["Part Name"]||s["TOOLS NAME"]||"",current_stock:s.current_stock||s.Total||s["CURRENT STOCK"]||0,stock_new:s.stock_new||s.NEW||0,stock_old:s.stock_old||s.OLD||0,stock_detail:s.stock_detail||s["Detail Specification"]||"",photo:s.photo||s.Picture||"",description:s.description||s["Detail Specification"]||"",uom:s.uom||s.UOM||"Pcs",remark:s.remark||s.Remark||"",location:s.location||""}),$(s.photo||s.Picture||null)):(K(),Y("create")),H(!0)},r=()=>{H(!1),K()},x=(s,l)=>{if(!s)return!0;const n=A=>A==null?"":typeof A=="number"?A:String(A).trim(),c=(A,Se=[])=>{let X=s[A];if(!X||X===""){for(const _e of Se)if(X=s[_e],X)break}return n(X||"")},o=A=>n(l[A]||""),h=c("tools_name",["Part Name","TOOLS NAME"]),_=o("tools_name");if(h!==_)return!0;const D=parseInt(c("current_stock",["Total","CURRENT STOCK"]))||0,M=parseInt(o("current_stock"))||0;if(D!==M)return!0;const R=parseInt(c("stock_new",["NEW"]))||0,J=parseInt(o("stock_new"))||0;if(R!==J)return!0;const fe=parseInt(c("stock_old",["OLD"]))||0,ye=parseInt(o("stock_old"))||0;if(fe!==ye)return!0;const je=c("stock_detail",["Detail Specification","description"]),Ne=o("stock_detail")||o("description");if(je!==Ne)return!0;const ve=c("photo",["Picture"]),we=o("photo");if(ve!==we)return!0;const ke=c("uom",["UOM"])||"Pcs",$e=o("uom")||"Pcs";if(ke!==$e)return!0;const Te=c("remark",["Remark"]),Ce=o("remark");return Te!==Ce},u=async s=>{if(s.preventDefault(),!g.tools_name.trim()){b.error("Nama tools wajib diisi");return}try{if(T){if(!x(T,g)){b("Tidak ada perubahan data",{duration:2e3,icon:"ℹ️"}),r();return}const l=T.tools_name||T["Part Name"]||T["TOOLS NAME"],n=await z.update(l,g);n&&n.no_changes?b("Tidak ada perubahan data",{duration:2e3,icon:"ℹ️"}):b.success("Tools berhasil diperbarui")}else await z.create(g),b.success("Tools berhasil ditambahkan");r()}catch(l){console.error("Error saving tool:",l),b.error(l.message||"Gagal menyimpan tools")}},j=s=>{const l=s.tools_name||s["Part Name"]||s["TOOLS NAME"];m.showConfirm(`Apakah Anda yakin ingin menghapus "${l}"?`,async()=>{try{await z.remove(l),b.success("Tools berhasil dihapus")}catch(n){console.error("Error deleting tool:",n),b.error(n.message||"Gagal menghapus tools")}},{title:"Hapus Tools",confirmText:"Hapus",cancelText:"Batal",type:"danger"})},i=s=>s?s.startsWith("data:image/")||s.startsWith("/api/")?s:s.startsWith("uploads/")?`/api/${s}`:s:null,N=s=>s===0?{label:"Habis",color:"text-red-400",bg:"bg-red-500/20"}:s<5?{label:"Kritis",color:"text-orange-400",bg:"bg-orange-500/20"}:s<10?{label:"Rendah",color:"text-yellow-400",bg:"bg-yellow-500/20"}:{label:"Aman",color:"text-green-400",bg:"bg-green-500/20"};return G?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"}),e.jsx("p",{className:`mt-4 ${t?"text-slate-200":"text-gray-700"}`,children:"Memuat data tools..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${t?"bg-slate-800/50":"bg-white"} rounded-xl p-6 border ${t?"border-slate-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-slate-100":"text-gray-900"} mb-2`,children:"Inventory Tools"}),e.jsx("p",{className:`text-sm ${t?"text-slate-300":"text-gray-700"}`,children:"Kelola inventori tools dan peralatan developer"})]}),e.jsxs("button",{onClick:()=>S(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl",children:[e.jsx(se,{size:20}),"Tambah Tools"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(de,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${t?"text-slate-300":"text-gray-500"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Cari tools, detail, remark...",value:v,onChange:s=>re(s.target.value),className:`w-full pl-10 pr-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100 placeholder-slate-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-purple-500`})]}),e.jsxs("div",{className:`flex rounded-lg border ${t?"border-slate-600 bg-slate-700/30":"border-gray-300 bg-gray-50"} p-1`,children:[e.jsxs("button",{onClick:()=>W("gallery"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-all ${O==="gallery"?"bg-purple-600 text-white":t?"text-slate-400 hover:text-slate-200":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(xe,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Galeri"})]}),e.jsxs("button",{onClick:()=>W("table"),className:`flex items-center gap-2 px-4 py-2 rounded-md transition-all ${O==="table"?"bg-purple-600 text-white":t?"text-slate-400 hover:text-slate-200":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ue,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Tabel"})]})]})]}),e.jsxs("div",{className:`text-sm mt-4 ${t?"text-slate-200":"text-gray-700"}`,children:["Menampilkan ",e.jsx("span",{className:"font-bold text-purple-400",children:q.length})," dari ",e.jsx("span",{className:`font-bold ${t?"text-slate-100":"text-gray-900"}`,children:P.length})," tools"]})]}),O==="gallery"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:q.map((s,l)=>{const n=s.tools_name||s["Part Name"]||s["TOOLS NAME"]||"Unknown",c=s.current_stock||s.Total||s["CURRENT STOCK"]||0,o=N(c),h=s.photo||s.Picture||null,_=s.stock_detail||s["Detail Specification"]||"",D=s.uom||s.UOM||"Pcs",M=s.stock_new||s.NEW||0,R=s.stock_old||s.OLD||0;return e.jsxs("div",{className:`${t?"bg-slate-800/50":"bg-white"} rounded-xl border ${t?"border-slate-700":"border-gray-200"} shadow-lg hover:shadow-xl transition-all overflow-hidden group`,children:[e.jsxs("div",{className:"relative h-48 bg-slate-900/50 overflow-hidden cursor-pointer",onClick:()=>{I(s),w(!0)},children:[i(h)?e.jsx("img",{src:i(h),alt:n,className:"w-full h-full object-contain bg-slate-800 group-hover:scale-105 transition-transform duration-300",onError:J=>{J.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect fill="%23334155" width="200" height="200"/><text x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" fill="%2394a3b8" font-size="14">No Image</text></svg>'}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-500/20 to-blue-500/20",children:e.jsx(ie,{className:"text-slate-400",size:48})}),e.jsxs("div",{className:`absolute top-3 right-3 px-3 py-1 rounded-full ${o.bg} ${o.color} text-xs font-bold backdrop-blur-sm border ${t?"border-slate-600":"border-white/20"}`,children:[c," ",D]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(Z,{className:"text-white",size:32})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:`font-bold text-lg mb-2 ${t?"text-slate-100":"text-gray-900"} line-clamp-2`,children:n}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${o.color.replace("text-","bg-")}`}),e.jsx("span",{className:`text-xs font-medium ${t?"text-slate-200":"text-gray-700"}`,children:o.label})]}),_&&e.jsx("div",{className:`text-xs mb-3 ${t?"text-slate-300":"text-gray-700"} line-clamp-2`,children:_}),e.jsxs("div",{className:`flex items-center gap-3 text-xs mb-3 ${t?"text-slate-300":"text-gray-700"}`,children:[M>0&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold text-green-400",children:"New:"})," ",M]}),R>0&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold text-blue-400",children:"Old:"})," ",R]}),e.jsxs("span",{className:"ml-auto",children:[e.jsx("span",{className:"font-semibold",children:"UOM:"})," ",D]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-700/50",children:[e.jsxs("button",{onClick:()=>{I(s),w(!0)},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${t?"bg-purple-600/20 hover:bg-purple-600/30 text-purple-400":"bg-purple-50 hover:bg-purple-100 text-purple-600"}`,children:[e.jsx(Z,{size:16}),"Detail"]}),e.jsxs("button",{onClick:()=>S(s),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${t?"bg-blue-600/20 hover:bg-blue-600/30 text-blue-400":"bg-blue-50 hover:bg-blue-100 text-blue-600"}`,children:[e.jsx(F,{size:16}),"Edit"]}),e.jsx("button",{onClick:()=>j(s),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${t?"bg-red-600/20 hover:bg-red-600/30 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,children:e.jsx(Q,{size:16})})]})]})]},l)})}),O==="table"&&e.jsx("div",{className:`${t?"bg-slate-800/50":"bg-white"} rounded-xl border ${t?"border-slate-700":"border-gray-200"} shadow-lg overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${t?"bg-slate-700/50":"bg-gray-50"} border-b ${t?"border-slate-700":"border-gray-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Foto"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Nama Tools"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Stock Detail"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Stock"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Aksi"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-slate-700":"divide-gray-200"}`,children:q.map((s,l)=>{const n=s.tools_name||s["Part Name"]||s["TOOLS NAME"]||"Unknown",c=s.current_stock||s.Total||s["CURRENT STOCK"]||0,o=N(c),h=i(s.photo||s.Picture||null),_=s.stock_detail||s["Detail Specification"]||"-",D=s.uom||s.UOM||"Pcs",M=s.stock_new||s.NEW||0,R=s.stock_old||s.OLD||0;return e.jsxs("tr",{className:`${t?"hover:bg-slate-700/30":"hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden cursor-pointer hover:ring-2 hover:ring-purple-500 transition-all bg-slate-800",onClick:()=>{I(s),w(!0)},children:h?e.jsx("img",{src:h,alt:n,className:"w-full h-full object-contain",onError:J=>{J.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect fill="%23334155" width="64" height="64"/><text x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" fill="%2394a3b8" font-size="10">No Image</text></svg>'}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-500/20 to-blue-500/20",children:e.jsx(ie,{className:"text-slate-400",size:24})})})}),e.jsx("td",{className:`px-6 py-4 ${t?"text-slate-100":"text-gray-900"} font-medium`,children:n}),e.jsxs("td",{className:`px-6 py-4 ${t?"text-slate-200":"text-gray-800"} text-sm max-w-xs`,children:[e.jsx("div",{className:"line-clamp-2 mb-1",children:_}),(M>0||R>0)&&e.jsxs("div",{className:"text-xs mt-1",children:[M>0&&e.jsxs("span",{className:"text-green-400 font-medium",children:["New: ",M]}),M>0&&R>0&&e.jsx("span",{className:`mx-1 ${t?"text-slate-400":"text-gray-500"}`,children:"•"}),R>0&&e.jsxs("span",{className:"text-blue-400 font-medium",children:["Old: ",R]})]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:[e.jsx("div",{className:`text-lg font-bold ${o.color}`,children:c}),e.jsx("div",{className:`text-xs mt-1 font-medium ${t?"text-slate-300":"text-gray-600"}`,children:D})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${o.bg} ${o.color}`,children:o.label})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{I(s),w(!0)},className:`p-2 rounded-lg transition-all ${t?"bg-purple-600/20 hover:bg-purple-600/30 text-purple-400":"bg-purple-50 hover:bg-purple-100 text-purple-600"}`,title:"Lihat Detail",children:e.jsx(Z,{size:16})}),e.jsx("button",{onClick:()=>S(s),className:`p-2 rounded-lg transition-all ${t?"bg-blue-600/20 hover:bg-blue-600/30 text-blue-400":"bg-blue-50 hover:bg-blue-100 text-blue-600"}`,title:"Edit",children:e.jsx(F,{size:16})}),e.jsx("button",{onClick:()=>j(s),className:`p-2 rounded-lg transition-all ${t?"bg-red-600/20 hover:bg-red-600/30 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,title:"Hapus",children:e.jsx(Q,{size:16})})]})})]},l)})})]})})}),q.length===0&&e.jsxs("div",{className:`text-center py-12 ${t?"text-slate-400":"text-gray-600"}`,children:[e.jsx(ee,{size:64,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-semibold mb-2",children:v?"Tidak ada tools yang ditemukan":"Belum ada tools"}),e.jsx("p",{className:"text-sm",children:v?"Coba gunakan kata kunci lain":'Klik "Tambah Tools" untuk menambahkan tools pertama'})]}),ne&&a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>w(!1),children:e.jsxs("div",{className:`${t?"bg-slate-800":"bg-white"} rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto`,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${t?"border-slate-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-2xl font-bold ${t?"text-slate-100":"text-gray-900"}`,children:"Detail Tools"}),e.jsx("button",{onClick:()=>w(!1),className:`p-2 rounded-lg transition-colors ${t?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(ae,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx("div",{className:"relative h-80 rounded-xl overflow-hidden bg-slate-900/50 border border-slate-700",children:i(a.photo||a.Picture)?e.jsx("img",{src:i(a.photo||a.Picture),alt:a.tools_name||a["Part Name"]||a["TOOLS NAME"],className:"w-full h-full object-contain",onError:s=>{s.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400"><rect fill="%23334155" width="400" height="400"/><text x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" fill="%2394a3b8" font-size="20">No Image Available</text></svg>'}}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-purple-500/20 to-blue-500/20",children:[e.jsx(Pe,{className:t?"text-slate-400":"text-gray-400",size:80}),e.jsx("p",{className:`${t?"text-slate-300":"text-gray-600"} mt-4`,children:"Tidak ada foto"})]})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-semibold ${t?"text-slate-400":"text-gray-600"} uppercase tracking-wide`,children:"Part Name"}),e.jsx("p",{className:`text-xl font-bold mt-1 ${t?"text-slate-100":"text-gray-900"}`,children:a.tools_name||a["Part Name"]||a["TOOLS NAME"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-semibold ${t?"text-slate-400":"text-gray-600"} uppercase tracking-wide`,children:"Total Stock"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:`text-3xl font-bold ${N(a.current_stock||a.Total||a["CURRENT STOCK"]||0).color}`,children:a.current_stock||a.Total||a["CURRENT STOCK"]||0}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${N(a.current_stock||a.Total||a["CURRENT STOCK"]||0).bg} ${N(a.current_stock||a.Total||a["CURRENT STOCK"]||0).color}`,children:N(a.current_stock||a.Total||a["CURRENT STOCK"]||0).label}),e.jsx("span",{className:`text-sm font-medium ${t?"text-slate-300":"text-gray-700"}`,children:a.uom||a.UOM||"Pcs"})]}),(a.stock_new||a.NEW||a.stock_old||a.OLD)&&e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[(a.stock_new||a.NEW)&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-slate-300":"text-gray-700"}`,children:"New:"}),e.jsx("span",{className:"ml-1 font-bold text-green-400",children:a.stock_new||a.NEW||0})]}),(a.stock_old||a.OLD)&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-slate-300":"text-gray-700"}`,children:"Old:"}),e.jsx("span",{className:"ml-1 font-bold text-blue-400",children:a.stock_old||a.OLD||0})]})]})]}),(a.stock_detail||a["Detail Specification"]||a.description)&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wide`,children:"Detail Specification"}),e.jsx("p",{className:`mt-1 text-base ${t?"text-slate-100":"text-gray-900"} whitespace-pre-line`,children:a.stock_detail||a["Detail Specification"]||a.description})]}),(a.remark||a.Remark)&&e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wide`,children:"Remark"}),e.jsx("p",{className:`mt-1 text-base ${t?"text-slate-100":"text-gray-900"} whitespace-pre-line`,children:a.remark||a.Remark})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-8 pt-6 border-t border-slate-700",children:[e.jsxs("button",{onClick:()=>{w(!1),S(a)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl",children:[e.jsx(F,{size:20}),"Edit Tools"]}),e.jsxs("button",{onClick:()=>{w(!1),j(a)},className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all ${t?"bg-red-600/20 hover:bg-red-600/30 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,children:[e.jsx(Q,{size:20}),"Hapus"]})]})]})]})}),le&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:`${t?"bg-slate-800":"bg-white"} rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${t?"border-slate-700":"border-gray-200"}`,children:[e.jsx("h3",{className:`text-xl font-bold ${t?"text-slate-100":"text-gray-900"}`,children:T?"Edit Tools":"Tambah Tools Baru"}),e.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${t?"hover:bg-slate-700 text-slate-400":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(ae,{size:20})})]}),e.jsxs("form",{onSubmit:u,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Foto Tools"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative w-32 h-32 rounded-lg overflow-hidden border-2 border-dashed border-slate-600 bg-slate-900/50",children:y?e.jsx("img",{src:y,alt:"Preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ie,{className:"text-slate-500",size:32})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:`block w-full px-4 py-3 rounded-lg border cursor-pointer transition-all ${t?"bg-slate-700/50 border-slate-600 hover:bg-slate-700 text-slate-300":"bg-gray-50 border-gray-300 hover:bg-gray-100 text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{size:20}),e.jsx("span",{children:y?"Ganti Foto":"Unggah Foto"})]}),e.jsx("input",{type:"file",accept:"image/*",onChange:oe,className:"hidden",disabled:L})]}),e.jsx("p",{className:`text-xs mt-2 ${t?"text-slate-400":"text-gray-500"}`,children:"Format: JPG, PNG, GIF (Max 5MB)"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:["Nama Tools ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",required:!0,value:g.tools_name,onChange:s=>f(l=>({...l,tools_name:s.target.value})),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100 placeholder-slate-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"Contoh: Screw Driver #6300"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Total Stock"}),e.jsx("input",{type:"number",min:"0",value:g.current_stock,onChange:s=>f(l=>({...l,current_stock:parseInt(s.target.value)||0})),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100":"bg-gray-50 border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"New"}),e.jsx("input",{type:"number",min:"0",value:g.stock_new,onChange:s=>f(l=>({...l,stock_new:parseInt(s.target.value)||0})),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100":"bg-gray-50 border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Old"}),e.jsx("input",{type:"number",min:"0",value:g.stock_old,onChange:s=>f(l=>({...l,stock_old:parseInt(s.target.value)||0})),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100":"bg-gray-50 border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Unit of Measure (UOM)"}),e.jsxs("select",{value:g.uom,onChange:s=>f(l=>({...l,uom:s.target.value})),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100":"bg-gray-50 border-gray-300 text-gray-900"} focus:outline-none focus:ring-2 focus:ring-purple-500`,children:[e.jsx("option",{value:"Pcs",children:"Pcs"}),e.jsx("option",{value:"Kg",children:"Kg"}),e.jsx("option",{value:"Box",children:"Box"}),e.jsx("option",{value:"Set",children:"Set"}),e.jsx("option",{value:"Unit",children:"Unit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Detail Specification"}),e.jsx("textarea",{value:g.stock_detail||g.description,onChange:s=>f(l=>({...l,stock_detail:s.target.value,description:s.target.value})),rows:3,className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100 placeholder-slate-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none`,placeholder:"Detail specification tools..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Remark"}),e.jsx("textarea",{value:g.remark,onChange:s=>f(l=>({...l,remark:s.target.value})),rows:2,className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100 placeholder-slate-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none`,placeholder:"Catatan tambahan..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Lokasi"}),e.jsx("input",{type:"text",value:g.location,onChange:s=>f(l=>({...l,location:s.target.value})),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100 placeholder-slate-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"Contoh: Gudang A, Rak 3"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-slate-700",children:[e.jsx("button",{type:"button",onClick:r,className:`px-6 py-3 rounded-lg font-semibold transition-all ${t?"bg-slate-700 hover:bg-slate-600 text-slate-300":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:"Batal"}),e.jsxs("button",{type:"submit",className:"px-6 py-3 rounded-lg font-semibold transition-all bg-purple-600 hover:bg-purple-700 text-white shadow-lg hover:shadow-xl",children:[e.jsx(me,{size:20,className:"inline-block mr-2"}),"Simpan"]})]})]})]})}),e.jsx(he,{isOpen:m.confirmState.isOpen,onClose:m.closeConfirm,onConfirm:m.handleConfirm,title:m.confirmState.title,message:m.confirmState.message,confirmText:m.confirmState.confirmText,cancelText:m.confirmState.cancelText,type:m.confirmState.type,confirmButtonColor:m.confirmState.confirmButtonColor})]})},Re=()=>{const{isDark:t}=ge(),m=be(),[P,p]=d.useState([]),[G,E]=d.useState(!0),[v,re]=d.useState(""),[O,W]=d.useState("table"),[le,H]=d.useState(!1),[ne,w]=d.useState(!1),[a,I]=d.useState(null),[T,V]=d.useState(null),[ce,Y]=d.useState("create"),[g,f]=d.useState({baby_parts:"",qty:0}),y=d.useRef(!0),$=d.useRef(!1),L=d.useRef(null),U=pe({endpoint:`${te}/baby-parts`,primaryKey:"baby_parts",eventName:"babyPartDataChanged"});d.useEffect(()=>{y.current=!0;const r=async()=>{if($.current){console.log("[InventoryBabyParts] Fetch already in progress, skipping");return}$.current=!0;try{y.current&&E(!0);const u=await fetch(`${te}/baby-parts`);if(!y.current){$.current=!1;return}const j=u.headers.get("content-type");if(!j||!j.includes("application/json")){const i=await u.text();console.error("[InventoryBabyParts] Expected JSON but got:",j,i.substring(0,100)),y.current&&(p([]),E(!1)),$.current=!1;return}if(u.ok){const i=await u.json();if(!y.current){$.current=!1;return}console.log("[InventoryBabyParts] Received data:",i),console.log("[InventoryBabyParts] Data type:",typeof i,"Is array:",Array.isArray(i));let N=[];Array.isArray(i)?N=i:i.data&&Array.isArray(i.data)?N=i.data:i.rows&&Array.isArray(i.rows)?N=i.rows:(console.warn("[InventoryBabyParts] Unexpected data format:",i),N=[]),console.log("[InventoryBabyParts] Parsed partsData:",N),console.log("[InventoryBabyParts] Parts count:",N.length),y.current&&p(N)}else{const i=await u.json().catch(()=>({}));console.error("[InventoryBabyParts] Error response:",u.status,i),y.current&&p([])}}catch(u){if(!y.current){$.current=!1;return}console.error("[InventoryBabyParts] Error fetching baby parts:",u),y.current&&p([])}finally{y.current&&(E(!1),$.current=!1)}};r();const x=()=>{L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{y.current&&r()},300)};return window.addEventListener("babyPartDataChanged",x),()=>{y.current=!1,window.removeEventListener("babyPartDataChanged",x),L.current&&clearTimeout(L.current)}},[]);const k=d.useMemo(()=>{if(!v.trim())return P;const r=v.toLowerCase();return P.filter(x=>(x.baby_parts||x["Baby Parts"]||"").toLowerCase().includes(r))},[P,v]),B=()=>{f({baby_parts:"",qty:0}),V(null)},C=(r=null)=>{r?(V(r),Y("edit"),f({baby_parts:r.baby_parts||r["Baby Parts"]||"",qty:r.qty||r.Qty||0})):(B(),Y("create")),H(!0)},z=()=>{H(!1),B()},q=(r,x)=>{if(!r)return!0;const u=c=>c==null?"":typeof c=="number"?c:String(c).trim(),j=(c,o=[])=>{let h=r[c];if(!h||h===""){for(const _ of o)if(h=r[_],h)break}return u(h||"")},i=c=>u(x[c]||""),N=j("baby_parts",["Baby Parts","BABY PARTS"]),s=i("baby_parts");if(N!==s)return!0;const l=parseInt(j("qty",["Qty","quantity"]))||0,n=parseInt(i("qty"))||0;return l!==n},oe=async r=>{if(r.preventDefault(),!g.baby_parts.trim()){b.error("Nama Baby Parts wajib diisi");return}try{if(T){if(!q(T,g)){b("Tidak ada perubahan data",{duration:2e3,icon:"ℹ️"}),z();return}const x=T.baby_parts||T["Baby Parts"]||T["BABY PARTS"],u=await U.update(x,g);u&&u.no_changes?b("Tidak ada perubahan data",{duration:2e3,icon:"ℹ️"}):b.success("Baby Part berhasil diperbarui")}else await U.create(g),b.success("Baby Part berhasil ditambahkan");z()}catch(x){console.error("Error saving baby part:",x),b.error(x.message||"Gagal menyimpan baby part")}},K=r=>{const x=r.baby_parts||r["Baby Parts"]||r["BABY PARTS"];m.showConfirm(`Apakah Anda yakin ingin menghapus "${x}"?`,async()=>{try{await U.remove(x),b.success("Baby Part berhasil dihapus")}catch(u){console.error("Error deleting baby part:",u),b.error(u.message||"Gagal menghapus baby part")}},{title:"Hapus Baby Part",confirmText:"Hapus",cancelText:"Batal",type:"danger"})},S=r=>r===0?{label:"Habis",color:"text-red-400",bg:"bg-red-500/20"}:r<5?{label:"Kritis",color:"text-orange-400",bg:"bg-orange-500/20"}:r<10?{label:"Rendah",color:"text-yellow-400",bg:"bg-yellow-500/20"}:{label:"Aman",color:"text-green-400",bg:"bg-green-500/20"};return G?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"}),e.jsx("p",{className:`mt-4 ${t?"text-slate-200":"text-gray-700"}`,children:"Memuat data baby parts..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${t?"bg-slate-800/50":"bg-white"} rounded-xl p-6 border ${t?"border-slate-700":"border-gray-200"} shadow-lg`,children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-slate-100":"text-gray-900"} mb-2`,children:"Inventory Baby Parts"}),e.jsx("p",{className:`text-sm ${t?"text-slate-300":"text-gray-700"}`,children:"Kelola inventori baby parts"})]}),e.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl",children:[e.jsx(se,{size:20}),"Tambah Baby Part"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(de,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 ${t?"text-slate-300":"text-gray-500"}`,size:20}),e.jsx("input",{type:"text",placeholder:"Cari baby part...",value:v,onChange:r=>re(r.target.value),className:`w-full pl-10 pr-4 py-2 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100 placeholder-slate-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-purple-500`})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>W("gallery"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all ${O==="gallery"?"bg-purple-600 text-white":t?"bg-slate-700 text-slate-400 hover:text-slate-200":"bg-gray-100 text-gray-600 hover:text-gray-900"}`,children:[e.jsx(xe,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Galeri"})]}),e.jsxs("button",{onClick:()=>W("table"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-all ${O==="table"?"bg-purple-600 text-white":t?"bg-slate-700 text-slate-400 hover:text-slate-200":"bg-gray-100 text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ue,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Tabel"})]})]})]}),e.jsxs("div",{className:`text-sm mt-4 ${t?"text-slate-200":"text-gray-700"}`,children:["Menampilkan ",e.jsx("span",{className:"font-bold text-purple-400",children:k.length})," dari ",e.jsx("span",{className:`font-bold ${t?"text-slate-100":"text-gray-900"}`,children:P.length})," baby parts"]})]}),O==="gallery"&&e.jsx(e.Fragment,{children:k.length===0?e.jsxs("div",{className:`${t?"bg-slate-800/50":"bg-white"} rounded-xl border ${t?"border-slate-700":"border-gray-200"} shadow-lg p-12 text-center`,children:[e.jsx(ee,{className:`mx-auto mb-4 ${t?"text-slate-400":"text-gray-400"}`,size:48}),e.jsx("h3",{className:`text-xl font-bold mb-2 ${t?"text-slate-200":"text-gray-900"}`,children:"Tidak ada data baby parts"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"} mb-6`,children:v?"Tidak ada baby parts yang sesuai dengan pencarian Anda":"Belum ada baby parts yang ditambahkan"}),!v&&e.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl mx-auto",children:[e.jsx(se,{size:20}),"Tambah Baby Part Pertama"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:k.map((r,x)=>{const u=r.baby_parts||r["Baby Parts"]||"Unknown",j=r.qty||r.Qty||0,i=S(j);return e.jsx("div",{className:`${t?"bg-slate-800/50":"bg-white"} rounded-xl border ${t?"border-slate-700":"border-gray-200"} shadow-lg hover:shadow-xl transition-all overflow-hidden group p-6`,children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:`w-16 h-16 rounded-full ${i.bg} flex items-center justify-center mb-4`,children:e.jsx(ee,{className:i.color,size:32})}),e.jsx("h3",{className:`font-bold text-lg mb-2 ${t?"text-slate-100":"text-gray-900"}`,children:u}),e.jsx("div",{className:`text-2xl font-bold mb-2 ${i.color}`,children:j}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${i.bg} ${i.color} mb-4`,children:i.label}),e.jsxs("div",{className:"flex items-center gap-2 w-full mt-4 pt-4 border-t border-slate-700/50",children:[e.jsxs("button",{onClick:()=>{I(r),w(!0)},className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${t?"bg-purple-600/20 hover:bg-purple-600/30 text-purple-400":"bg-purple-50 hover:bg-purple-100 text-purple-600"}`,children:[e.jsx(Z,{size:16}),"Detail"]}),e.jsxs("button",{onClick:()=>C(r),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all ${t?"bg-blue-600/20 hover:bg-blue-600/30 text-blue-400":"bg-blue-50 hover:bg-blue-100 text-blue-600"}`,children:[e.jsx(F,{size:16}),"Edit"]}),e.jsx("button",{onClick:()=>K(r),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${t?"bg-red-600/20 hover:bg-red-600/30 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,children:e.jsx(Q,{size:16})})]})]})},x)})})}),O==="table"&&e.jsx("div",{className:`${t?"bg-slate-800/50":"bg-white"} rounded-xl border ${t?"border-slate-700":"border-gray-200"} shadow-lg overflow-hidden`,children:k.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(ee,{className:`mx-auto mb-4 ${t?"text-slate-400":"text-gray-400"}`,size:48}),e.jsx("h3",{className:`text-xl font-bold mb-2 ${t?"text-slate-200":"text-gray-900"}`,children:"Tidak ada data baby parts"}),e.jsx("p",{className:`text-sm ${t?"text-slate-400":"text-gray-600"} mb-6`,children:v?"Tidak ada baby parts yang sesuai dengan pencarian Anda":"Belum ada baby parts yang ditambahkan"}),!v&&e.jsxs("button",{onClick:()=>C(),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl mx-auto",children:[e.jsx(se,{size:20}),"Tambah Baby Part Pertama"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`${t?"bg-slate-700/50":"bg-gray-50"} border-b ${t?"border-slate-700":"border-gray-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Baby Parts"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Quantity"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-center text-xs font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wider`,children:"Aksi"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-slate-700":"divide-gray-200"}`,children:k.map((r,x)=>{const u=r.baby_parts||r["Baby Parts"]||"Unknown",j=r.qty||r.Qty||0,i=S(j);return e.jsxs("tr",{className:`${t?"hover:bg-slate-700/30":"hover:bg-gray-50"} transition-colors`,children:[e.jsx("td",{className:`px-6 py-4 ${t?"text-slate-100":"text-gray-900"} font-medium`,children:u}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("div",{className:`text-lg font-bold ${i.color}`,children:j})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${i.bg} ${i.color}`,children:i.label})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{I(r),w(!0)},className:`p-2 rounded-lg transition-all ${t?"bg-purple-600/20 hover:bg-purple-600/30 text-purple-400":"bg-purple-50 hover:bg-purple-100 text-purple-600"}`,title:"Lihat Detail",children:e.jsx(Z,{size:16})}),e.jsx("button",{onClick:()=>C(r),className:`p-2 rounded-lg transition-all ${t?"bg-blue-600/20 hover:bg-blue-600/30 text-blue-400":"bg-blue-50 hover:bg-blue-100 text-blue-600"}`,title:"Edit",children:e.jsx(F,{size:16})}),e.jsx("button",{onClick:()=>K(r),className:`p-2 rounded-lg transition-all ${t?"bg-red-600/20 hover:bg-red-600/30 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,title:"Hapus",children:e.jsx(Q,{size:16})})]})})]},x)})})]})})}),ne&&a&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>w(!1),children:e.jsxs("div",{className:`${t?"bg-slate-800":"bg-white"} rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto`,onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-slate-100":"text-gray-900"}`,children:"Detail Baby Part"}),e.jsx("button",{onClick:()=>w(!1),className:`p-2 rounded-lg transition-colors ${t?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(ae,{size:24})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wide`,children:"Baby Parts"}),e.jsx("p",{className:`text-xl font-bold mt-1 ${t?"text-slate-100":"text-gray-900"}`,children:a.baby_parts||a["Baby Parts"]||a["BABY PARTS"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`text-sm font-semibold ${t?"text-slate-300":"text-gray-700"} uppercase tracking-wide`,children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:`text-3xl font-bold ${S(a.qty||a.Qty||0).color}`,children:a.qty||a.Qty||0}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${S(a.qty||a.Qty||0).bg} ${S(a.qty||a.Qty||0).color}`,children:S(a.qty||a.Qty||0).label})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-3 mt-8 pt-6 border-t border-slate-700 p-6",children:[e.jsxs("button",{onClick:()=>{w(!1),C(a)},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl",children:[e.jsx(F,{size:20}),"Edit Baby Part"]}),e.jsxs("button",{onClick:()=>{w(!1),K(a)},className:`flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold transition-all ${t?"bg-red-600/20 hover:bg-red-600/30 text-red-400":"bg-red-50 hover:bg-red-100 text-red-600"}`,children:[e.jsx(Q,{size:20}),"Hapus"]})]})]})}),le&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:z,children:e.jsxs("div",{className:`${t?"bg-slate-800":"bg-white"} rounded-xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto`,onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-slate-100":"text-gray-900"}`,children:ce==="create"?"Tambah Baby Part":"Edit Baby Part"}),e.jsx("button",{onClick:z,className:`p-2 rounded-lg transition-colors ${t?"hover:bg-slate-700 text-slate-400 hover:text-white":"hover:bg-gray-100 text-gray-600"}`,children:e.jsx(ae,{size:24})})]}),e.jsxs("form",{onSubmit:oe,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:["Nama Baby Parts ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",value:g.baby_parts,onChange:r=>f(x=>({...x,baby_parts:r.target.value})),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100 placeholder-slate-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"Masukkan nama baby parts",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-semibold mb-2 ${t?"text-slate-300":"text-gray-700"}`,children:"Quantity"}),e.jsx("input",{type:"number",min:"0",value:g.qty,onChange:r=>f(x=>({...x,qty:parseInt(r.target.value)||0})),className:`w-full px-4 py-3 rounded-lg border ${t?"bg-slate-700/50 border-slate-600 text-slate-100 placeholder-slate-400":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-400"} focus:outline-none focus:ring-2 focus:ring-purple-500`,placeholder:"0"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:z,className:`flex-1 px-4 py-3 rounded-lg font-semibold transition-all ${t?"bg-slate-700 hover:bg-slate-600 text-slate-200":"bg-gray-200 hover:bg-gray-300 text-gray-800"}`,children:"Batal"}),e.jsxs("button",{type:"submit",className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl",children:[e.jsx(me,{size:20}),"Simpan"]})]})]})]})}),e.jsx(he,{isOpen:m.confirmState.isOpen,onClose:m.closeConfirm,onConfirm:m.handleConfirm,title:m.confirmState.title,message:m.confirmState.message,confirmText:m.confirmState.confirmText,cancelText:m.confirmState.cancelText,type:m.confirmState.type,confirmButtonColor:m.confirmState.confirmButtonColor})]})};function Ke(){const[t,m]=d.useState("inventory"),P=[{id:"inventory",label:"Inventory Tools",icon:ee},{id:"babypart",label:"Baby Part Tools",icon:De}];return e.jsx(Oe,{title:"Toolbox",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex gap-2 border-b border-slate-700/50",children:P.map(p=>{const G=p.icon,E=t===p.id;return e.jsxs("button",{onClick:()=>m(p.id),className:Ee("flex items-center gap-2 px-6 py-3 font-semibold transition-all border-b-2",E?"text-purple-400 border-purple-400":"text-slate-400 border-transparent hover:text-slate-300"),children:[e.jsx(G,{size:18}),p.label]},p.id)})}),e.jsxs("div",{children:[t==="inventory"&&e.jsx(Me,{}),t==="babypart"&&e.jsx(Re,{})]})]})})}export{Ke as default};
