const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FullscreenChartModal-73Mp0Mq3.js","assets/vendor-react-DhTDDHjY.js","assets/vendor-maps-C_U1R0uQ.js","assets/vendor-maps-Dgihpmma.css","assets/SkillProgress-CpQTq6g-.js","assets/index-CgJi8s-G.js","assets/index-jY80aAX8.css","assets/useEngineerData-CH_O1yHW.js","assets/indonesia-prov-BRgqRgcB.js","assets/useMachineKPIs-C0JF2Ok6.js","assets/textUtils-DatDPYXU.js","assets/PageLayout-I56-JVwe.js"])))=>i.map(i=>d[i]);
import{u as Ke,L as tt,c as $,T as A,g as re,a as ve,_ as st}from"./index-CgJi8s-G.js";import{R as at,r as i,j as e,o as nt,p as rt,q as lt,u as it,s as F,t as de,v as _,w as xe,x as V,y as ot,z as he,A as me,Y as le,X as ye,D as ue}from"./vendor-react-DhTDDHjY.js";import{u as ct,a as dt,b as xt,c as ht}from"./useEngineerData-CH_O1yHW.js";import{i as mt,u as ut}from"./indonesia-prov-BRgqRgcB.js";import{u as gt}from"./useMachineKPIs-C0JF2Ok6.js";import{S as pt}from"./SkillProgress-CpQTq6g-.js";import{L as ft}from"./vendor-maps-C_U1R0uQ.js";import{n as bt,t as jt,a as Ge}from"./textUtils-DatDPYXU.js";import{P as Nt}from"./PageLayout-I56-JVwe.js";const vt=JSON.parse(mt),Oe={Jakarta:"DKI JAKARTA","Jakarta Pusat":"DKI JAKARTA","Jakarta Selatan":"DKI JAKARTA","Jakarta Barat":"DKI JAKARTA","Jakarta Timur":"DKI JAKARTA","Jakarta Utara":"DKI JAKARTA",Bandung:"JAWA BARAT",Bogor:"JAWA BARAT",Depok:"JAWA BARAT",Bekasi:"JAWA BARAT",Cirebon:"JAWA BARAT",Tasikmalaya:"JAWA BARAT",Sukabumi:"JAWA BARAT",Cikampek:"JAWA BARAT",Cianjur:"JAWA BARAT",Kuningan:"JAWA BARAT",Semarang:"JAWA TENGAH",Solo:"JAWA TENGAH",Yogyakarta:"DAERAH ISTIMEWA YOGYAKARTA",Tegal:"JAWA TENGAH",Purwokerto:"JAWA TENGAH",Pekalongan:"JAWA TENGAH",Madiun:"JAWA TENGAH",Blora:"JAWA TENGAH",Klaten:"JAWA TENGAH",Jepara:"JAWA TENGAH","Madiun (Bojonegoro)":"JAWA TENGAH",Surabaya:"JAWA TIMUR",Malang:"JAWA TIMUR",Jember:"JAWA TIMUR",Kediri:"JAWA TIMUR",Banyuwangi:"JAWA TIMUR",Probolinggo:"JAWA TIMUR",Pamekasan:"JAWA TIMUR",Bangkalan:"JAWA TIMUR",Tangerang:"BANTEN",Serang:"BANTEN",Medan:"SUMATERA UTARA","Pematang Siantar":"SUMATERA UTARA",Tarutung:"SUMATERA UTARA","Rantau Prapat":"SUMATERA UTARA",Padang:"SUMATERA BARAT",Payakumbuh:"SUMATERA BARAT",Palembang:"SUMATERA SELATAN",Lahat:"SUMATERA SELATAN",Lubuklinggau:"SUMATERA SELATAN",Pekanbaru:"RIAU",Dumai:"RIAU",Tembilahan:"RIAU",Batam:"KEPULAUAN RIAU",Bintan:"KEPULAUAN RIAU",Lampung:"LAMPUNG",Kotabumi:"LAMPUNG",Jambi:"JAMBI",Bengkulu:"BENGKULU",Aceh:"DI. ACEH",Bangka:"BANGKA BELITUNG",Belitung:"BANGKA BELITUNG",Pontianak:"KALIMANTAN BARAT",Ketapang:"KALIMANTAN BARAT",Sanggau:"KALIMANTAN BARAT",Palangkaraya:"KALIMANTAN TENGAH","Pangkalan Bun":"KALIMANTAN TENGAH",Banjarmasin:"KALIMANTAN SELATAN",Balikpapan:"KALIMANTAN TIMUR",Samarinda:"KALIMANTAN TIMUR",Berau:"KALIMANTAN TIMUR",Tarakan:"KALIMANTAN UTARA",Manado:"SULAWESI UTARA",Palu:"SULAWESI TENGAH","Palu/Luwuk":"SULAWESI TENGAH",Makassar:"SULAWESI SELATAN","Pare Pare":"SULAWESI SELATAN",Palopo:"SULAWESI SELATAN",Bulukumba:"SULAWESI SELATAN",Kendari:"SULAWESI TENGGARA",Gorontalo:"GORONTALO",Ambon:"MALUKU",Ternate:"MALUKU UTARA",Timika:"PAPUA",Jayapura:"PAPUA",Marauke:"PAPUA",Sorong:"PAPUA BARAT",Manokwari:"PAPUA BARAT",Denpasar:"BALI",Mataram:"NUSATENGGARA BARAT",Bima:"NUSATENGGARA BARAT",Kupang:"NUSA TENGGARA TIMUR",Waikabubak:"NUSA TENGGARA TIMUR",Ruteng:"NUSA TENGGARA TIMUR",Ende:"NUSA TENGGARA TIMUR",Atambua:"NUSA TENGGARA TIMUR",Larantuka:"NUSA TENGGARA TIMUR"},yt={"Region 1":"#ef4444","Region 2":"#3b82f6","Region 3":"#10b981","Region 4":"#f59e0b","Region 5":"#8b5cf6","Region 6":"#ec4899","Region 7":"#14b8a6","Region 8":"#f97316","Region 9":"#6366f1","Region 10":"#eab308"},ge=T=>yt[T]||"#94a3b8",Pe=at.memo(function({machines:x,engineers:p=[],onEngineerClick:G,isFullscreen:g=!1}){const[B,O]=i.useState(null),[Ae,ke]=i.useState(null),[pe,j]=i.useState(!0),{theme:fe,isDark:d}=Ke(),H=i.useMemo(()=>{const n={};return(p||[]).forEach(o=>{const u=o.area_group||"Unknown",b=o.region||"Unknown",v=Oe[u]||u;n[v]||(n[v]={areaGroup:v,cities:new Set,region:b,engineerCount:0,machineCount:0,engineers:[],latitude:0,longitude:0,validCoords:0}),n[v].cities.add(u),n[v].engineerCount++,n[v].engineers.push(o),o.latitude&&o.longitude&&(n[v].latitude+=parseFloat(o.latitude),n[v].longitude+=parseFloat(o.longitude),n[v].validCoords++)}),Object.keys(n).forEach(o=>{n[o].validCoords>0&&(n[o].latitude/=n[o].validCoords,n[o].longitude/=n[o].validCoords)}),(x||[]).forEach(o=>{const u=o.area_group||"Unknown",b=Oe[u]||u;n[b]||(n[b]={areaGroup:b,cities:new Set,region:"Unknown",engineerCount:0,machineCount:0,engineers:[],latitude:0,longitude:0,validCoords:0}),n[b].machineCount++}),n},[p,x]),Q=i.useRef(null);if(i.useEffect(()=>(B&&Object.keys(H).length>0&&(Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{requestAnimationFrame(()=>{const n=ft.latLngBounds();Object.values(H).forEach(o=>{o.latitude&&o.longitude&&o.validCoords>0&&n.extend([o.latitude,o.longitude])}),n.isValid()&&B.fitBounds(n,{padding:[50,50],animate:!1})})},150)),()=>{Q.current&&clearTimeout(Q.current)}),[B,H]),(!p||p.length===0)&&(!x||x.length===0))return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"text-slate-400",children:"No data available"})});const E=Object.values(H).filter(n=>n.validCoords>0||n.machineCount>0).sort((n,o)=>o.engineerCount+o.machineCount-(n.engineerCount+n.machineCount)),ie=i.useMemo(()=>{const n={};return E.forEach(o=>{const u=o.region||"Unknown";n[u]||(n[u]={region:u,provinceCount:0,totalMachines:0,totalEngineers:0,provinces:[]}),n[u].provinceCount++,n[u].totalMachines+=o.machineCount,n[u].totalEngineers+=o.engineerCount,n[u].provinces.push({name:o.areaGroup,machines:o.machineCount,engineers:o.engineerCount})}),Object.keys(n).forEach(o=>{n[o].provinces.sort((u,b)=>b.machines-u.machines)}),n},[E]),Z=i.useMemo(()=>E.sort((n,o)=>o.machineCount-n.machineCount).slice(0,5).map(n=>({name:n.areaGroup,machines:n.machineCount,engineers:n.engineerCount,region:n.region})),[E]),Y=i.useMemo(()=>Math.max(...E.map(n=>n.engineerCount),1),[E]),oe=i.useCallback(n=>{const o=n.properties.Propinsi||n.properties.name||"",u=E.find(P=>o.toUpperCase()===P.areaGroup.toUpperCase());let b,L=1.5,v=.4;if(u){b=ge(u.region);const P=u.engineerCount/Y;L=1.5+P*4.5,v=.4+P*.5}else b="#e5e7eb",L=1,v=.15;return{fillColor:b,fillOpacity:v,color:"#ffffff",weight:L,opacity:.95}},[E,Y]),ce=i.useCallback((n,o)=>{const u=n.properties.Propinsi||n.properties.name||"",b=E.find(L=>u.toUpperCase()===L.areaGroup.toUpperCase());if(b){const L=ge(b.region),v=b.engineerCount/Y,P=1.5+v*4.5,w=.4+v*.5,k=Array.from(b.cities||[]).join(", "),J=d?"#0f172a":"#ffffff",I=d?"#ffffff":"#0f172a",be=L,je=d?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.2)";o.bindTooltip(`<div style="background: ${J}; padding: 12px 16px; border-radius: 8px; box-shadow: 0 8px 16px ${je}; border: 2px solid ${be}; line-height: 1.8; overflow: hidden;">
            <div style="font-weight: 700; font-size: 14px; margin-bottom: 8px; color: ${I};">üìç ${b.areaGroup}</div>
            <div style="color: ${I}; margin-bottom: 6px;">üèôÔ∏è ${k}</div>
            <div style="color: ${I}; margin-bottom: 6px;">üñ•Ô∏è <span style="color: ${I}; font-weight: 700;">${b.machineCount||0}</span> mesin</div>
            <div style="color: ${I}; margin-bottom: 6px;">üë∑ <span style="color: ${I}; font-weight: 700;">${b.engineerCount}</span> engineers</div>
            <div style="color: ${I}; font-size: 12px; opacity: 0.9;">üó∫Ô∏è ${b.region}</div>
          </div>`,{sticky:!0,className:"custom-map-tooltip",direction:"auto",permanent:!1});let q=null;o.on({mouseover:M=>{q&&clearTimeout(q),q=setTimeout(()=>{requestAnimationFrame(()=>{M.target.setStyle({fillOpacity:.95,weight:P+2})})},16)},mouseout:M=>{q&&clearTimeout(q),requestAnimationFrame(()=>{M.target.setStyle({fillOpacity:w,weight:P})})}})}},[E,Y,d]);return e.jsxs("div",{className:"map-container relative",style:{height:"100%",width:"100%",borderRadius:g?"0":"16px",overflow:"hidden",boxShadow:g?"none":"0 20px 25px -5px rgba(0, 0, 0, 0.3)",border:g?"none":"1px solid rgba(59, 130, 246, 0.2)"},children:[e.jsxs(nt,{center:[-2.5489,118.0149],zoom:5,style:{height:"100%",width:"100%"},whenCreated:O,zoomControl:!0,children:[e.jsx(rt,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),e.jsx(lt,{data:vt,style:oe,onEachFeature:ce},`geojson-${fe}`)]}),pe?e.jsxs("div",{className:`absolute top-4 right-4 z-[100] ${d?"bg-slate-900/95":"bg-white/95"} backdrop-blur-sm rounded-lg border ${d?"border-slate-700":"border-gray-300"} shadow-xl p-4 max-w-xs`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:`font-bold text-sm ${d?"text-white":"text-gray-900"}`,children:"üó∫Ô∏è Legend"}),e.jsx("button",{onClick:()=>j(!1),className:`p-1 rounded hover:${d?"bg-slate-800":"bg-gray-100"} transition-colors ${d?"text-slate-400 hover:text-white":"text-gray-500 hover:text-gray-700"}`,title:"Sembunyikan Legend",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:`text-xs font-semibold mb-2 ${d?"text-slate-300":"text-gray-700"}`,children:"Region"}),e.jsx("div",{className:"space-y-1.5",children:["Region 1","Region 2","Region 3"].map(n=>{const o=ge(n),u=ie[n];return e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("div",{className:"w-4 h-4 rounded border-2 border-white shadow-sm",style:{backgroundColor:o}}),e.jsx("span",{className:`flex-1 ${d?"text-slate-200":"text-gray-800"}`,children:n}),u&&e.jsxs("span",{className:`font-semibold ${d?"text-slate-400":"text-gray-600"}`,children:[u.provinceCount," prov"]})]},n)})})]}),Z.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-semibold mb-2 ${d?"text-slate-300":"text-gray-700"}`,children:"üèÜ Top 5 Provinsi (Mesin)"}),e.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:Z.map((n,o)=>{const u=ge(n.region);return e.jsxs("div",{className:`flex items-center gap-2 text-xs p-1.5 rounded ${d?"bg-slate-800/50":"bg-gray-50"} hover:${d?"bg-slate-800":"bg-gray-100"} transition-colors`,children:[e.jsx("span",{className:`font-bold w-5 text-center ${d?"text-slate-400":"text-gray-500"}`,children:o+1}),e.jsx("div",{className:"w-3 h-3 rounded border border-white/50",style:{backgroundColor:u}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium truncate ${d?"text-slate-200":"text-gray-800"}`,children:n.name}),e.jsxs("div",{className:`text-xs ${d?"text-slate-400":"text-gray-600"}`,children:[n.machines," mesin"]})]})]},o)})})]})]}):e.jsx("button",{onClick:()=>j(!0),className:`absolute top-4 right-4 z-[100] ${d?"bg-slate-900/95 hover:bg-slate-800":"bg-white/95 hover:bg-gray-50"} backdrop-blur-sm rounded-lg border ${d?"border-slate-700":"border-gray-300"} shadow-xl p-2 transition-colors`,title:"Tampilkan Legend",children:e.jsx("svg",{className:`w-5 h-5 ${d?"text-slate-300":"text-gray-700"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})},(T,x)=>{var p,G,g,B;return!(T.isFullscreen!==x.isFullscreen||T.onEngineerClick!==x.onEngineerClick||T.machines!==x.machines&&((p=T.machines)==null?void 0:p.length)!==((G=x.machines)==null?void 0:G.length)||T.engineers!==x.engineers&&((g=T.engineers)==null?void 0:g.length)!==((B=x.engineers)==null?void 0:B.length))}),ze=(T,x="area_group",p)=>{if(!p){const{normalizeAreaGroup:g}=require("./textUtils");p=g}const G={};return T.forEach(g=>{const B=g[x]||"Unknown",O=p(B);G[O]=(G[O]||0)+1}),G},At=i.lazy(()=>st(()=>import("./FullscreenChartModal-73Mp0Mq3.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])));function kt(){var Ee,Ie,Ue,We,$e;const T=it(),{isDark:x}=Ke(),{rows:p,loading:G}=ct(),{rows:g,loading:B}=dt(),{rows:O,loading:Ae}=xt(),{rows:ke,loading:pe}=ht(),[j,fe]=i.useState("REGION"),[d,H]=i.useState(""),[Q,E]=i.useState(!1),[ie,Z]=i.useState(!1),[Y,oe]=i.useState(!1),[ce,n]=i.useState(!1),o=t=>{let s;if(t.instal_date){const a=t.instal_date;if(a.includes("-")){const l=a.split("-"),c=l[l.length-1];s=c.length===2?"20"+c:c}}else t.year&&(s=t.year.toString());return s||null},u=(t,s)=>{const a=o(t);if(!a)return null;const l=parseInt(a);return isNaN(l)?null:s-l},b=(t,s,a)=>{for(const l of s)if(t<=l.max)return l.label;return a},L=(t,s,a="Unknown")=>{const l={};return t.forEach(c=>{const r=c[s]||a;l[r]=(l[r]||0)+1}),l},v=(t,s="name",a="value")=>Object.entries(t).map(([l,c])=>({[s]:l,[a]:c})),P=i.useMemo(()=>{let t=[];if(j==="REGION")t=["Region 1","Region 2","Region 3"];else if(j==="VENDOR")t=p.map(l=>l.vendor).filter(Boolean);else if(j==="AREA GROUP"){const a=p.map(r=>r.area_group).filter(Boolean),l=g.map(r=>r.area_group).filter(Boolean);t=[...a,...l];const c=new Map;t.forEach(r=>{const y=bt(r);c.has(y)||c.set(y,jt(y))}),t=Array.from(c.values())}return[...new Set(t)].filter(Boolean).sort((a,l)=>{if(j==="REGION"){const c=["Region 1","Region 2","Region 3"],r=c.indexOf(a),y=c.indexOf(l);if(r!==-1&&y!==-1)return r-y;if(r!==-1)return-1;if(y!==-1)return 1}return a.localeCompare(l)})},[p,g,j]),w=i.useMemo(()=>{if(!d)return p;const t=j==="REGION"?"region":j==="VENDOR"?"vendor":"area_group";return j==="AREA GROUP"?p.filter(s=>{var r;const a=(r=s[t])==null?void 0:r.toLowerCase().trim().replace(/\s+/g," "),l=d.toLowerCase().trim();return a.replace(/\s+\d+$/,"")===l}):p.filter(s=>s[t]===d)},[p,j,d]),k=i.useMemo(()=>d?j==="REGION"?g.filter(t=>{const s=p.find(a=>a.area_group===t.area_group||a.vendor===t.customer);return(s==null?void 0:s.region)===d||t.region===d}):j==="VENDOR"?g.filter(t=>t.customer===d):j==="AREA GROUP"?g.filter(t=>{var c;const s=(c=t.area_group)==null?void 0:c.toLowerCase().trim().replace(/\s+/g," "),a=d.toLowerCase().trim();return s.replace(/\s+\d+$/,"")===a}):g:g,[g,p,j,d]),J=i.useMemo(()=>L(g,"provinsi","Unknown"),[g]),I=i.useMemo(()=>L(p,"region","Unknown"),[p]),be=i.useMemo(()=>ze(g,"area_group",Ge),[g]),je=i.useMemo(()=>L(g,"customer","Unknown"),[g]),q=i.useMemo(()=>ze(p,"area_group",Ge),[p]);i.useMemo(()=>d||`All ${j}s`,[d,j]);const M=i.useMemo(()=>k.length,[k]),C=i.useMemo(()=>w.length,[w]),Je=i.useMemo(()=>g.length,[g]),ee=i.useMemo(()=>p.length,[p]),Fe=gt(k,g),{onWarranty:X,outOfWarranty:te,warrantyRemaining:R}=Fe,f=M>0?X/M*100:0,we=i.useMemo(()=>!O||O.length===0?[]:O.filter(t=>(t.part_number||t["part number"]||"").toLowerCase()!=="region"),[O]);ut(we,we,ke||[]);const h=i.useMemo(()=>{if(!k||k.length===0)return null;const t=(r,y=2)=>{if(!r)return{days:0,expired:!0,status:"expired"};const se=parseInt(r)||new Date().getFullYear(),D=new Date,ne=new Date(se+y,11,31)-D,z=Math.ceil(ne/(1e3*60*60*24));if(z<0)return{days:0,expired:!0,status:"expired"};let K="good";return z<90?K="critical":z<180&&(K="warning"),{days:z,expired:!1,status:K,months:Math.floor(z/30)}},s=k.filter(r=>r.machine_status==="On Warranty"||r.machine_status==="In Warranty").map(r=>({...r,warrantyInfo:t(r.year,2)})).filter(r=>!r.warrantyInfo.expired),a=s.filter(r=>r.warrantyInfo.status==="critical").sort((r,y)=>r.warrantyInfo.days-y.warrantyInfo.days).slice(0,10),l=s.reduce((r,y)=>(r[y.warrantyInfo.status]=(r[y.warrantyInfo.status]||0)+1,r),{critical:0,warning:0,good:0}),c={"0-30 hari":s.filter(r=>r.warrantyInfo.days<=30).length,"31-90 hari":s.filter(r=>r.warrantyInfo.days>30&&r.warrantyInfo.days<=90).length,"91-180 hari":s.filter(r=>r.warrantyInfo.days>90&&r.warrantyInfo.days<=180).length,"181-365 hari":s.filter(r=>r.warrantyInfo.days>180&&r.warrantyInfo.days<=365).length,"> 365 hari":s.filter(r=>r.warrantyInfo.days>365).length};return{totalOnWarranty:s.length,expiringSoonMachines:a,distribution:l,timeRanges:c,avgRemaining:R}},[k,R]),m=i.useMemo(()=>C>0?M/C:0,[M,C]),_e=i.useMemo(()=>m<60?"Good":m<70?"Moderate":"High",[m]),Se=i.useMemo(()=>m<60?"text-green-400":m<70?"text-yellow-400":"text-red-400",[m]),Ve=i.useMemo(()=>m<60?"üòä":m<70?"üòê":"üò∞",[m]),Me=i.useMemo(()=>{if(m<=0)return"0%";const t=60,s=70;if(m<=t)return"100%";if(m<=s){const a=100-(m-t)/(s-t)*15;return`${Math.max(85,Math.round(a))}%`}else{const a=t/m*100;return`${Math.max(0,Math.min(85,Math.round(a)))}%`}},[m]),Te=i.useMemo(()=>`${Math.min(100,Math.round(m/70*100))}%`,[m]),He=i.useMemo(()=>{if(m<=0)return"0%";const t=60,s=70;if(m<=t)return"100%";if(m<=s){const a=100-(m-t)/(s-t)*15;return`${Math.max(85,a)}%`}else{const a=t/m*100;return`${Math.max(0,Math.min(85,a))}%`}},[m]),Ye=i.useMemo(()=>`${Math.min(100,m/70*100)}%`,[m]),qe=i.useMemo(()=>{const t=[{max:2,label:"0-2 years"},{max:5,label:"3-5 years"},{max:10,label:"6-10 years"}],s="10+ years",a={};return t.forEach(l=>a[l.label]=0),a[s]=0,w.forEach(l=>{const c=l.experience||0,r=b(c,t,s);a[r]++}),v(a,"range","count")},[w]),Xe=i.useMemo(()=>{const t={};return w.forEach(s=>{(s.skills||[]).forEach(l=>{t[l]=(t[l]||0)+1})}),Object.entries(t).map(([s,a])=>({skill:s,count:a})).sort((s,a)=>a.count-s.count).slice(0,10)},[w]),Qe=i.useMemo(()=>{const t={Completed:0,"In Progress":0,"Not Started":0};return w.forEach(s=>{const a=s.training_status||"Not Started";t.hasOwnProperty(a)&&t[a]++}),v(t,"name","value")},[w]),Ze=i.useMemo(()=>{const t={"In Warranty":0,"Out Of Warranty":0};return k.forEach(s=>{const a=s.machine_status||"Unknown";a.includes("Warranty")&&(a==="Out Of Warranty"?t["Out Of Warranty"]++:t["In Warranty"]++)}),v(t,"name","value")},[k]),N=i.useMemo(()=>{if(!rows||rows.length===0)return console.log("[DEBUG] No machine data for monthly activation"),[];console.log("[DEBUG] Calculating monthly activations from",rows.length,"machines");const t={};rows.forEach(a=>{const l=a.instal_date||a.install_date||a.instalDate;if(l)try{const r=l.trim().split("-");if(r.length===3){const y=r[0],se=r[1],D=r[2],ae=D.length===2?parseInt(D)>=50?`19${D}`:`20${D}`:D,z={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[se]||"01",K=`${ae}-${z}`;t[K]=(t[K]||0)+1}}catch{}});const s=Object.entries(t).map(([a,l])=>{const[c,r]=a.split("-");return{month:`${r}/${c}`,count:l,sortKey:a}}).sort((a,l)=>a.sortKey.localeCompare(l.sortKey));return console.log("[DEBUG] Calculated",s.length,"monthly data points"),s.length>0&&(console.log("[DEBUG] First activation:",s[0]),console.log("[DEBUG] Last activation:",s[s.length-1]),console.log("[DEBUG] Total machines counted:",s.reduce((a,l)=>a+l.count,0))),s.slice(-36)},[rows]),Re=i.useCallback(t=>{const s=parseFloat(t);return isNaN(s)?"0%":Math.abs(s)>=1e3?`${Math.round(s).toLocaleString("en-US")}%`:Math.abs(s)>=100?`${Math.round(s)}%`:`${s.toFixed(1)}%`},[]),S=i.useMemo(()=>{var K,Be,De;if(!N||N.length===0)return{total:0,average:0,highest:{month:"-",count:0},lowest:{month:"-",count:0},growthRate:0,growthRateFormatted:"0%",recentTrend:"stable"};const t=((K=N[N.length-1])==null?void 0:K.count)||0,s=Math.round(N.reduce((U,W)=>U+W.count,0)/N.length),a=N.reduce((U,W)=>W.count>U.count?W:U,N[0]),l=N.reduce((U,W)=>W.count<U.count?W:U,N[0]),c=((Be=N[0])==null?void 0:Be.count)||1,y=((((De=N[N.length-1])==null?void 0:De.count)||0)-c)/c*100,se=Re(y),D=N.slice(-6),ae=D.reduce((U,W)=>U+W.count,0)/D.length,ne=N.slice(-12,-6).reduce((U,W)=>U+W.count,0)/6,z=ae>ne*1.05?"growing":ae<ne*.95?"declining":"stable";return{total:t,average:s,highest:a,lowest:l,growthRate:y,growthRateFormatted:se,recentTrend:z}},[N,Re]),Ce=i.useMemo(()=>{const t=new Date().getFullYear(),s=[{max:2,label:"0-2 years"},{max:5,label:"3-5 years"},{max:10,label:"6-10 years"},{max:15,label:"11-15 years"}],a="15+ years",l={};return s.forEach(c=>l[c.label]=0),l[a]=0,k.forEach(c=>{const r=u(c,t);if(r!==null&&r>=0){const y=b(r,s,a);l[y]++}}),v(l,"range","count")},[k]),Le=i.useMemo(()=>{const t={},s=new Date().getFullYear();return k.forEach(l=>{const c=o(l);if(c){const r=parseInt(c);r>=s-20&&r<=s&&(t[c]=(t[c]||0)+1)}}),v(t,"year","count").sort((l,c)=>l.year-c.year)},[k]),Ne=i.useCallback(t=>{T("/engineers",{state:{selectedEngineer:t}})},[T]),et=i.useMemo(()=>{const t=Object.entries(I).map(([s,a])=>({name:s,value:a,ratio:J!=null&&J[s]?Math.round(J[s]/a):0})).sort((s,a)=>a.value-s.value).slice(0,3);return t.length===0?e.jsx(F,{width:"100%",height:50,children:e.jsxs(de,{data:[{name:"Filter",value:C},{name:"Total",value:ee}],margin:{top:5,right:5,left:0,bottom:5},children:[e.jsx(_,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #10b981",borderRadius:"8px",padding:"6px 10px"},labelStyle:{color:"#e2e8f0",fontSize:"11px",fontWeight:"bold"},itemStyle:{color:"#6ee7b7",fontSize:"11px"},formatter:s=>[s.toLocaleString(),"Jumlah"]}),e.jsx(xe,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(V,{dataKey:"name",tick:{fill:"#cbd5e1",fontSize:10},stroke:"#64748b",height:20})]})}):e.jsx(F,{width:"100%",height:50,children:e.jsxs(de,{data:t,margin:{top:5,right:5,left:0,bottom:20},children:[e.jsx(_,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #10b981",borderRadius:"8px",padding:"6px 10px"},labelStyle:{color:"#e2e8f0",fontSize:"11px",fontWeight:"bold"},itemStyle:{color:"#6ee7b7",fontSize:"11px"},formatter:(s,a)=>a==="value"?[s.toLocaleString(),"Engineer"]:[s,"Rasio"]}),e.jsx(xe,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0],children:t.map((s,a)=>{const l=parseFloat(s.ratio);let c="#10b981";return l>70?c="#ef4444":l>60&&(c="#f59e0b"),e.jsx(ot,{fill:c},`cell-${a}`)})}),e.jsx(V,{dataKey:"name",tick:{fill:"#cbd5e1",fontSize:9},stroke:"#64748b",height:30,angle:-45,textAnchor:"end"})]})})},[I,J,C,ee]);return G||B||Ae||pe?e.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-900",children:e.jsx(tt,{type:"spinner",message:"Memuat data dashboard...",size:"lg"})}):e.jsxs(Nt,{title:"ROC Dashboard",subtitle:"Engineering & Machine Management Overview",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:$(re("blue",!0),"min-h-[200px]"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:A.kpiTitle,children:"Total Mesin"}),e.jsx("h3",{className:A.kpiValue,children:M.toLocaleString()}),e.jsx("p",{className:A.kpiSubtitle,children:d||`Semua ${j}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-3xl",children:"üñ•Ô∏è"}),e.jsx("button",{onClick:()=>setFullscreenChart("total-machines"),className:"text-slate-400 hover:text-blue-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-blue-600/20 hover:bg-blue-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"w-full h-3 bg-slate-700/50 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-400 transition-all duration-500",style:{width:`${f}%`}}),e.jsx("div",{className:"absolute top-0 right-0 h-full bg-gradient-to-r from-red-500/80 to-red-400/80 transition-all duration-500",style:{width:`${100-f}%`}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-2.5 hover:bg-green-500/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-green-400 text-lg",children:"‚úÖ"}),e.jsx("span",{className:"text-xs text-green-300 font-semibold",children:"On Warranty"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-xl font-bold text-green-400",children:X.toLocaleString()}),e.jsxs("span",{className:"text-xs text-green-300/70",children:["(",f.toFixed(1),"%)"]})]})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-2.5 hover:bg-red-500/20 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-red-400 text-lg",children:"‚ö†Ô∏è"}),e.jsx("span",{className:"text-xs text-red-300 font-semibold",children:"Expired"})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-xl font-bold text-red-400",children:te.toLocaleString()}),e.jsxs("span",{className:"text-xs text-red-300/70",children:["(",(100-f).toFixed(1),"%)"]})]})]})]}),e.jsxs("div",{className:"pt-2 border-t border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[e.jsx("span",{children:"Coverage Rate"}),e.jsxs("span",{className:$("font-semibold",f>=50?"text-green-400":f>=30?"text-yellow-400":"text-red-400"),children:[f.toFixed(1),"%"]})]}),R&&R.avgMonths>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400 mt-1",children:[e.jsx("span",{children:"Avg. Remaining"}),e.jsxs("span",{className:"text-blue-400 font-semibold",children:[R.avgMonths," bulan"]})]})]})]})]}),e.jsxs("div",{className:$(re("green",!0),"min-h-[200px]"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:A.kpiTitle,children:"Total Engineer"}),e.jsx("h3",{className:A.kpiValue,children:C.toLocaleString()}),e.jsx("p",{className:A.kpiSubtitle,children:d||`Semua ${j}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-3xl",children:"üë®‚Äçüíº"}),e.jsx("button",{onClick:()=>setFullscreenChart("total-engineers"),className:"text-slate-400 hover:text-green-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-green-600/20 hover:bg-green-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-slate-400",children:["Filter: ",C.toLocaleString()]}),e.jsxs("span",{className:"text-slate-500",children:["Total: ",ee.toLocaleString()]}),e.jsxs("span",{className:"text-green-400 font-semibold",children:[ee>0?(C/ee*100).toFixed(1):0,"%"]})]}),C>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs px-1",children:[e.jsx("span",{className:"text-slate-400",children:"Rasio:"}),e.jsxs("span",{className:`font-semibold ${M/C<60?"text-green-400":M/C<70?"text-yellow-400":"text-red-400"}`,children:[Math.round(M/C)," mesin/engineer"]})]}),et]})]}),e.jsxs("div",{className:$(re("purple",!0),"min-h-[200px]"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:A.kpiTitle,children:"Rasio Mesin/Engineer"}),e.jsx("h3",{className:A.kpiValue,children:Math.round(m)}),e.jsx("p",{className:A.kpiSubtitle,children:"Mesin per engineer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-3xl",children:"‚öôÔ∏è"}),e.jsx("button",{onClick:()=>setFullscreenChart("machine-ratio"),className:"text-slate-400 hover:text-purple-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-purple-600/20 hover:bg-purple-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(F,{width:"100%",height:95,children:e.jsxs(he,{data:[{name:"Opt",value:60},{name:"Skrg",value:m},{name:"Max",value:70}],margin:{top:10,right:10,left:0,bottom:10},children:[e.jsx(_,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #8b5cf6",borderRadius:"8px",padding:"6px 10px"},labelStyle:{color:"#e2e8f0",fontSize:"11px",fontWeight:"bold"},itemStyle:{color:"#c4b5fd",fontSize:"11px"},formatter:t=>[`${Math.round(t)}`,"Ratio"]}),e.jsx(me,{type:"monotone",dataKey:"value",stroke:"#8b5cf6",strokeWidth:2.5,dot:{fill:"#8b5cf6",r:4,strokeWidth:2,stroke:"#1e293b"}}),e.jsx(V,{dataKey:"name",tick:{fill:"#cbd5e1",fontSize:10},stroke:"#64748b",height:25}),e.jsx(le,{tick:{fill:"#cbd5e1",fontSize:10},stroke:"#64748b",domain:[0,100],width:35})]})})})]}),e.jsxs("div",{className:$(re("orange",!0),"min-h-[200px]"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:A.kpiTitle,children:"Efisiensi"}),e.jsx("h3",{className:$("text-3xl font-bold",Se),children:_e}),e.jsx("p",{className:A.kpiSubtitle,children:"Status beban kerja"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-3xl",children:Ve}),e.jsx("button",{onClick:()=>setFullscreenChart("efficiency-status"),className:"text-slate-400 hover:text-orange-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-orange-600/20 hover:bg-orange-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-200 font-medium",children:"Efisiensi"}),e.jsx("span",{className:`font-bold ${Se}`,children:Me})]}),e.jsx("div",{className:"w-full h-3.5 bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${m<60?"bg-gradient-to-r from-green-400 to-green-300":m<70?"bg-gradient-to-r from-yellow-400 to-yellow-300":"bg-gradient-to-r from-red-400 to-red-300"}`,style:{width:He}})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-200 font-medium",children:"Beban"}),e.jsx("span",{className:"text-slate-200 font-bold",children:Te})]}),e.jsx("div",{className:"w-full h-3.5 bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-slate-400 to-slate-500 transition-all duration-500",style:{width:Ye}})})]})})]})]}),fullscreenChart==="map"&&e.jsxs("div",{className:"fixed inset-0 z-[9999] bg-slate-900 flex flex-col",style:{zIndex:9999,position:"fixed",top:0,left:0,right:0,bottom:0},children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-700 flex-shrink-0",style:{height:"auto"},children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Sebaran Service Point HCS-IDN"}),e.jsx("button",{onClick:()=>setFullscreenChart(null),className:"text-slate-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-slate-800",children:e.jsx(ye,{size:24})})]}),e.jsx("div",{className:"flex-1 overflow-hidden",style:{minHeight:0,height:"calc(100vh - 80px)",width:"100%"},children:e.jsx("div",{style:{height:"100%",width:"100%",position:"relative"},children:e.jsx("div",{style:{height:"100%",width:"100%",borderRadius:0,overflow:"hidden",boxShadow:"none",border:"none"},children:e.jsx(Pe,{machines:k,engineers:w,onEngineerClick:Ne,isFullscreen:!0})})})})]}),fullscreenChart!=="map"&&e.jsxs("div",{className:"bg-[var(--card-bg)] p-4 rounded-lg relative",style:{height:"600px",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Sebaran Service Point HCS-IDN"}),e.jsx("button",{onClick:()=>setFullscreenChart("map"),className:"text-slate-400 hover:text-blue-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-blue-600/20 hover:bg-blue-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-slate-700/50",children:[e.jsx("div",{className:"flex gap-2",children:[{name:"REGION",label:"Region"},{name:"VENDOR",label:"Vendor"},{name:"AREA GROUP",label:"Area"}].map(t=>e.jsx("button",{onClick:()=>fe(t.name),className:`text-sm px-4 py-2 rounded transition-all ${j===t.name?"bg-blue-600/80 text-white font-semibold":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/60"}`,title:t.label,children:t.label},t.name))}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsxs("select",{className:"text-sm bg-slate-800/70 text-slate-200 px-3 py-2 rounded border border-slate-600/50 focus:outline-none focus:border-blue-400/70 cursor-pointer",value:d,onChange:t=>H(t.target.value),children:[e.jsxs("option",{value:"",children:["All ",j,"s"]}),P.map(t=>e.jsx("option",{value:t,children:t},t))]}),d&&e.jsx("button",{onClick:()=>H(""),className:"text-slate-400 hover:text-red-400 text-base font-bold px-2 py-1",title:"Clear",children:"‚úï"})]})]}),(()=>{const t=ie||Y||ce||fullscreenChart&&fullscreenChart!=="map";return e.jsx("div",{style:{flex:1,height:"100%",minHeight:"0",position:"relative",zIndex:t?1:"auto",pointerEvents:t?"none":"auto"},className:t?"map-container-modal-open":"",children:e.jsx(Pe,{machines:k,engineers:w,onEngineerClick:Ne})})})()]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"bg-[var(--card-bg)] p-4 rounded-lg relative min-h-[400px] max-h-[500px] flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Training Skill Progress"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-slate-400",children:[w.length," engineers"]}),e.jsx("button",{onClick:()=>setFullscreenChart("training-skills"),className:"text-slate-400 hover:text-blue-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-blue-600/20 hover:bg-blue-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})]}),!fullscreenChart&&e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-slate-800",children:w.length>0?w.map((t,s)=>e.jsx(pt,{engineer:t},s)):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:"No engineers data available"})})]}),e.jsxs("div",{className:$(re("green",!0),"min-h-[400px] max-h-[500px] flex flex-col overflow-hidden"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:A.kpiTitle,children:"Coverage Garansi"}),e.jsxs("h3",{className:A.kpiValue,children:[f.toFixed(1),"%"]}),e.jsx("p",{className:A.kpiSubtitle,children:d||`Semua ${j}`})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>{console.log("Opening Warranty Insight Modal..."),console.log("warrantyInsights:",h),oe(!0)},className:"text-slate-400 hover:text-green-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-green-600/20 hover:bg-green-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})})]}),e.jsxs("div",{className:"mt-4 flex-shrink-0",children:[e.jsxs("div",{className:"w-full h-4 bg-slate-700 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-400 transition-all duration-500",style:{width:`${f}%`}}),e.jsx("div",{className:"absolute top-0 right-0 h-full bg-gradient-to-r from-red-500 to-red-400 transition-all duration-500",style:{width:`${100-f}%`}})]}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-400"}),e.jsxs("span",{className:"text-green-400 font-semibold",children:[X.toLocaleString()," aktif"]}),e.jsxs("span",{className:"text-slate-500",children:["(",f.toFixed(1),"%)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400"}),e.jsxs("span",{className:"text-red-400 font-semibold",children:[te.toLocaleString()," expired"]}),e.jsxs("span",{className:"text-slate-500",children:["(",(100-f).toFixed(1),"%)"]})]})]})]}),R&&R.avgDays>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-700/50 flex-1 flex flex-col min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 flex-shrink-0",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-lg",children:"‚è±Ô∏è"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Rata-rata Sisa"})]}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:R.avgMonths>0?`${R.avgMonths} bulan`:`${R.avgDays} hari`})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-3 border border-slate-700/50",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-xs text-slate-400",children:"Total Aktif"})}),e.jsx("div",{className:"text-lg font-bold text-green-400",children:X.toLocaleString()})]})]}),h&&h.expiringSoonMachines&&h.expiringSoonMachines.length>0&&e.jsxs("div",{className:"mb-2 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"text-xs text-slate-400 font-semibold flex items-center gap-1",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," Mesin yang Expiring Soon"]}),h.expiringSoonMachines.length>3&&e.jsx("button",{onClick:()=>n(!0),className:"text-xs text-green-400 hover:text-green-300 transition-colors font-semibold",children:"Lihat Detail ‚Üí"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"text-left py-1 px-2 text-slate-400 font-semibold",children:"#"}),e.jsx("th",{className:"text-left py-1 px-2 text-slate-400 font-semibold",children:"WSID"}),e.jsx("th",{className:"text-left py-1 px-2 text-slate-400 font-semibold",children:"Area"}),e.jsx("th",{className:"text-right py-1 px-2 text-slate-400 font-semibold",children:"Sisa"})]})}),e.jsx("tbody",{children:h.expiringSoonMachines.slice(0,3).map((t,s)=>e.jsxs("tr",{className:"border-b border-slate-700/30 hover:bg-slate-800/50 transition-colors last:border-b-0",children:[e.jsx("td",{className:"py-1 px-2 text-slate-300 font-mono",children:s+1}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("div",{className:"text-slate-200 font-mono truncate max-w-[120px]",title:t.wsid||"Unknown",children:t.wsid||"Unknown"})}),e.jsx("td",{className:"py-1 px-2",children:e.jsx("div",{className:"text-slate-400 truncate max-w-[100px]",title:t.area_group||"Unknown",children:t.area_group||"Unknown"})}),e.jsx("td",{className:"py-1 px-2 text-right",children:e.jsxs("div",{className:`font-bold ${t.warrantyInfo.days<=30?"text-red-400":t.warrantyInfo.days<=60?"text-orange-400":"text-yellow-400"}`,children:[t.warrantyInfo.days," hari"]})})]},s))})]})})]}),e.jsx("div",{className:"mt-auto pt-3 border-t border-slate-700/50 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-slate-400",children:["Total Mesin: ",e.jsx("span",{className:"text-slate-200 font-semibold",children:M.toLocaleString()})]}),e.jsxs("div",{className:"text-slate-400",children:["Coverage: ",e.jsxs("span",{className:"text-green-400 font-semibold",children:[f.toFixed(1),"%"]})]})]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:$(ve("blue",!0),"min-h-[340px]"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:A.heading4,children:"Aktivasi Mesin Per Bulan"}),e.jsx("p",{className:A.mutedSmall,children:"Trend aktivasi mesin bulanan"})]}),e.jsx("button",{onClick:()=>Z(!0),className:"text-slate-400 hover:text-blue-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-blue-600/20 hover:bg-blue-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),loadingMonthly?e.jsx("div",{className:"flex items-center justify-center",style:{height:"220px"},children:e.jsx("div",{className:"text-slate-500",children:"Loading data aktivasi..."})}):N.length===0?e.jsx("div",{className:"flex items-center justify-center",style:{height:"220px"},children:e.jsx("div",{className:"text-slate-500",children:"Data aktivasi tidak tersedia"})}):e.jsx("div",{style:{height:"220px"},children:e.jsx(F,{width:"100%",height:220,children:e.jsxs(he,{data:N,children:[e.jsx(ue,{strokeDasharray:"3 3",stroke:"#475569"}),e.jsx(V,{dataKey:"month",tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(le,{tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(_,{contentStyle:{backgroundColor:"#1e293b",border:"2px solid #3b82f6",borderRadius:"8px",padding:"6px 10px"},labelStyle:{color:"#e2e8f0",fontSize:"11px",fontWeight:"bold"},itemStyle:{color:"#93c5fd",fontSize:"11px"}}),e.jsx(me,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",r:4}})]})})})]}),e.jsxs("div",{className:$(ve("blue",!0),"min-h-[340px]"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:A.heading4,children:"Distribusi Usia Mesin"}),e.jsx("p",{className:A.mutedSmall,children:"Berdasarkan tahun instalasi"})]}),e.jsx("button",{onClick:()=>setFullscreenChart("machine-age"),className:"text-slate-400 hover:text-blue-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-blue-600/20 hover:bg-blue-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),e.jsx("div",{style:{height:"220px"},children:e.jsx(F,{width:"100%",height:220,children:e.jsxs(de,{data:Ce,children:[e.jsx(ue,{strokeDasharray:"3 3",stroke:"#475569"}),e.jsx(V,{dataKey:"range",tick:{fill:"#94a3b8",fontSize:11},angle:-15,textAnchor:"end",height:60}),e.jsx(le,{tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(_,{contentStyle:{backgroundColor:"#1e293b",border:"2px solid #3b82f6",borderRadius:"8px",padding:"6px 10px"},labelStyle:{color:"#e2e8f0",fontSize:"11px",fontWeight:"bold"},itemStyle:{color:"#93c5fd",fontSize:"11px"}}),e.jsx(xe,{dataKey:"count",fill:"#3b82f6",radius:[6,6,0,0]})]})})})]}),e.jsxs("div",{className:$(ve("green",!0),"min-h-[340px]"),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:A.heading4,children:"Trend Instalasi per Tahun"}),e.jsx("p",{className:A.mutedSmall,children:"Growth mesin over time"})]}),e.jsx("button",{onClick:()=>setFullscreenChart("install-year"),className:"text-slate-400 hover:text-green-400 transition-colors p-2 rounded hover:bg-slate-700/50 bg-green-600/20 hover:bg-green-600/30",title:"Lihat Insight Detail",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),e.jsx("div",{style:{height:"220px"},children:e.jsx(F,{width:"100%",height:220,children:e.jsxs(he,{data:Le,children:[e.jsx(ue,{strokeDasharray:"3 3",stroke:"#475569"}),e.jsx(V,{dataKey:"year",tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(le,{tick:{fill:"#94a3b8",fontSize:11}}),e.jsx(_,{contentStyle:{backgroundColor:"#1e293b",border:"2px solid #10b981",borderRadius:"8px",padding:"6px 10px"},labelStyle:{color:"#e2e8f0",fontSize:"11px",fontWeight:"bold"},itemStyle:{color:"#6ee7b7",fontSize:"11px"}}),e.jsx(me,{type:"monotone",dataKey:"count",stroke:"#10b981",strokeWidth:3,dot:{fill:"#10b981",r:4}})]})})})]})]}),e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:fullscreenChart&&fullscreenChart!=="map"&&e.jsx(At,{chartType:fullscreenChart,onClose:()=>setFullscreenChart(null),filteredMachines:k,filteredEngineers:w,experienceData:qe,skillsData:Xe,trainingData:Qe,warrantyData:Ze,machineAgeData:Ce,installYearData:Le,currentMachines:M,currentEngineers:C,totalMachines:Je,totalEngineers:ee,currentRatio:m,efficiencyPercentage:Me,loadPercentage:Te,machinesByRegion:J,engineersByRegion:I,machinesByAreaGroup:be,machinesByVendor:je,engineersByAreaGroup:q,onEngineerClick:Ne,warrantyPercentage:f,onWarranty:X,outOfWarranty:te,warrantyRemaining:R})}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center p-4",style:{zIndex:9999},onClick:()=>Z(!1),children:e.jsxs("div",{className:"bg-slate-800 rounded-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto border border-slate-700",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-slate-800 border-b border-slate-700 p-6 flex justify-between items-center z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"üìä Insights Aktivasi Mesin"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Analisis mendalam trend aktivasi mesin dari ",(Ee=N[0])==null?void 0:Ee.month," hingga ",(Ie=N[N.length-1])==null?void 0:Ie.month]})]}),e.jsx("button",{onClick:()=>Z(!1),className:"text-slate-400 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`bg-gradient-to-br ${x?"from-blue-500/30 via-blue-400/20 to-indigo-500/30 border-blue-400/40":"from-blue-100 via-blue-50 to-indigo-100 border-blue-300"} p-4 rounded-lg border shadow-lg ${x?"shadow-blue-500/20":"shadow-blue-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"üéØ"}),e.jsx("p",{className:`text-sm ${x?"text-slate-300":"text-gray-700"}`,children:"Total Mesin Aktif"})]}),e.jsx("h3",{className:`text-3xl font-bold ${x?"text-blue-300":"text-blue-600"}`,children:S.total.toLocaleString()}),e.jsx("p",{className:`text-xs ${x?"text-slate-400":"text-gray-600"} mt-1`,children:"saat ini"})]}),e.jsxs("div",{className:`bg-gradient-to-br ${x?"from-emerald-500/30 via-green-400/20 to-teal-500/30 border-emerald-400/40":"from-emerald-100 via-green-50 to-teal-100 border-emerald-300"} p-4 rounded-lg border shadow-lg ${x?"shadow-emerald-500/20":"shadow-emerald-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"üìà"}),e.jsx("p",{className:`text-sm ${x?"text-slate-300":"text-gray-700"}`,children:"Pertumbuhan Total"})]}),e.jsxs("h3",{className:`text-3xl font-bold ${x?"text-emerald-300":"text-emerald-600"}`,children:["+",S.growthRateFormatted]}),e.jsx("p",{className:`text-xs ${x?"text-slate-400":"text-gray-600"} mt-1`,children:"sejak awal"})]}),e.jsxs("div",{className:`bg-gradient-to-br ${x?"from-purple-500/30 via-purple-400/20 to-pink-500/30 border-purple-400/40":"from-purple-100 via-purple-50 to-pink-100 border-purple-300"} p-4 rounded-lg border shadow-lg ${x?"shadow-purple-500/20":"shadow-purple-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"üèÜ"}),e.jsx("p",{className:`text-sm ${x?"text-slate-300":"text-gray-700"}`,children:"Puncak Tertinggi"})]}),e.jsx("h3",{className:`text-2xl font-bold ${x?"text-purple-300":"text-purple-600"}`,children:S.highest.count.toLocaleString()}),e.jsx("p",{className:`text-xs ${x?"text-slate-400":"text-gray-600"} mt-1`,children:S.highest.month})]}),e.jsxs("div",{className:`bg-gradient-to-br ${x?"from-orange-500/30 via-amber-400/20 to-yellow-500/30 border-orange-400/40":"from-orange-100 via-amber-50 to-yellow-100 border-orange-300"} p-4 rounded-lg border shadow-lg ${x?"shadow-orange-500/20":"shadow-orange-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:S.recentTrend==="growing"?"üöÄ":S.recentTrend==="declining"?"üìâ":"‚û°Ô∏è"}),e.jsx("p",{className:`text-sm ${x?"text-slate-300":"text-gray-700"}`,children:"Trend Terkini"})]}),e.jsx("h3",{className:`text-2xl font-bold ${x?"text-orange-300":"text-orange-600"} capitalize`,children:S.recentTrend==="growing"?"Naik":S.recentTrend==="declining"?"Turun":"Stabil"}),e.jsx("p",{className:`text-xs ${x?"text-slate-400":"text-gray-600"} mt-1`,children:"6 bulan terakhir"})]})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"üìà Trend Aktivasi Historis"}),e.jsx(F,{width:"100%",height:350,children:e.jsxs(he,{data:N,children:[e.jsx(ue,{strokeDasharray:"3 3",stroke:"#475569"}),e.jsx(V,{dataKey:"month",tick:{fill:"#94a3b8",fontSize:10},stroke:"#64748b",angle:-45,textAnchor:"end",height:80}),e.jsx(le,{tick:{fill:"#94a3b8",fontSize:11},stroke:"#64748b"}),e.jsx(_,{contentStyle:{backgroundColor:"#1e293b",border:"2px solid #3b82f6",borderRadius:"12px"},labelStyle:{color:"#e2e8f0",fontWeight:"bold"},itemStyle:{color:"#60a5fa"},formatter:t=>[t.toLocaleString()+" mesin","Total Aktif"]}),e.jsx(me,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:3,dot:{fill:"#3b82f6",r:3},activeDot:{r:6,stroke:"#1e293b",strokeWidth:2}})]})})]}),e.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-lg border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"üí° Key Insights & Rekomendasi"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex gap-3 items-start p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("span",{className:"text-2xl",children:"üìä"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-200 font-medium",children:"Pertumbuhan Eksponensial"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Total mesin aktif telah tumbuh ",e.jsx("strong",{className:"text-green-400",children:S.growthRateFormatted})," sejak ",(Ue=N[0])==null?void 0:Ue.month,", menunjukkan adopsi yang sangat kuat dan konsisten."]})]})]}),e.jsxs("div",{className:"flex gap-3 items-start p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("span",{className:"text-2xl",children:"üéØ"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-200 font-medium",children:"Peak Performance"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Aktivasi tertinggi tercatat pada ",e.jsx("strong",{className:x?"text-purple-300":"text-purple-600",children:S.highest.month})," dengan",e.jsxs("strong",{className:"text-purple-400",children:[" ",S.highest.count.toLocaleString()," mesin"]})," aktif."]})]})]}),e.jsxs("div",{className:"flex gap-3 items-start p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("span",{className:"text-2xl",children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-200 font-medium",children:"Maintenance Planning"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Dengan ",S.total.toLocaleString()," mesin aktif, prioritaskan preventive maintenance schedule untuk memastikan uptime optimal di semua lokasi."]})]})]}),e.jsxs("div",{className:"flex gap-3 items-start p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("span",{className:"text-2xl",children:S.recentTrend==="growing"?"üöÄ":S.recentTrend==="declining"?"‚ö†Ô∏è":"‚û°Ô∏è"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-200 font-medium",children:"Trend Analysis"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:S.recentTrend==="growing"?"Trend aktivasi menunjukkan pertumbuhan positif 6 bulan terakhir. Pastikan resource dan support team mencukupi.":S.recentTrend==="declining"?"Trend menunjukkan penurunan aktivasi. Review faktor-faktor yang mempengaruhi dan lakukan improvement action.":"Trend stabil. Monitor terus untuk memastikan konsistensi operasional dan identifikasi opportunity untuk growth."})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 p-4 rounded-lg border border-blue-500/30",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-100 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"üéØ"})," Action Items & Next Steps"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-slate-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 mt-0.5",children:"‚ñ∏"}),e.jsx("span",{children:"Lakukan capacity planning berdasarkan trend pertumbuhan untuk antisipasi kebutuhan engineer dan spare parts"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 mt-0.5",children:"‚ñ∏"}),e.jsx("span",{children:"Analisis pola seasonal untuk optimasi deployment resources di bulan-bulan dengan aktivasi tinggi"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 mt-0.5",children:"‚ñ∏"}),e.jsx("span",{children:"Setup monitoring dashboard real-time untuk track aktivasi harian dan identify anomali lebih cepat"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-400 mt-0.5",children:"‚ñ∏"}),e.jsx("span",{children:"Review historical data untuk understand correlation antara aktivasi mesin dengan faktor eksternal (seasonality, campaign, dll)"})]})]})]})]})]})}),ce&&h&&h.expiringSoonMachines&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",style:{zIndex:9999},children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-5xl max-h-[90vh] flex flex-col border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," Top 5 Mesin yang Expiring Soon"]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Menampilkan 5 dari ",h.expiringSoonMachines.length," mesin dengan status critical"]})]}),e.jsx("button",{onClick:()=>n(!1),className:"text-slate-400 hover:text-white transition-colors p-2 rounded hover:bg-slate-800",children:e.jsx(ye,{size:24})})]}),e.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"#"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"WSID"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"Nama Mesin"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"Area"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"Customer"}),e.jsx("th",{className:"text-left py-3 px-4 text-slate-400 font-semibold",children:"Region"}),e.jsx("th",{className:"text-right py-3 px-4 text-slate-400 font-semibold",children:"Sisa Hari"}),e.jsx("th",{className:"text-center py-3 px-4 text-slate-400 font-semibold",children:"Status"})]})}),e.jsx("tbody",{children:h.expiringSoonMachines.slice(0,5).map((t,s)=>e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-800/50 transition-colors",children:[e.jsxs("td",{className:"py-3 px-4 text-slate-300 font-bold text-red-400",children:["#",s+1]}),e.jsx("td",{className:"py-3 px-4 text-slate-200 font-mono text-sm",children:t.wsid}),e.jsx("td",{className:"py-3 px-4 text-slate-200 font-semibold",children:t.branch_name||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-slate-300",children:t.area_group||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-slate-300",children:t.customer||"Unknown"}),e.jsx("td",{className:"py-3 px-4 text-slate-300",children:t.region||"Unknown"}),e.jsxs("td",{className:"py-3 px-4 text-right",children:[e.jsx("div",{className:`font-bold text-lg ${t.warrantyInfo.days<=30?"text-red-400":t.warrantyInfo.days<=60?"text-orange-400":"text-yellow-400"}`,children:t.warrantyInfo.days}),e.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:t.warrantyInfo.months>0?`${t.warrantyInfo.months} bulan`:"< 1 bulan"})]}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-red-500/20 text-red-400 font-semibold",children:"Critical"})})]},s))})]})})})]})}),Y&&h&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-6",style:{zIndex:9999},children:e.jsxs("div",{className:"bg-slate-900 rounded-xl w-full max-w-6xl max-h-[90vh] flex flex-col border border-slate-700 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx("span",{children:"üìä"})," Insight Detail Warranty"]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Analisis lengkap status warranty ",h.totalOnWarranty," mesin"]})]}),e.jsx("button",{onClick:()=>oe(!1),className:"text-slate-400 hover:text-white transition-colors p-2 rounded hover:bg-slate-800",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Total On Warranty"}),e.jsx("p",{className:"text-2xl font-bold text-green-400",children:h.totalOnWarranty})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Rata-rata Sisa"}),e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:((We=h.avgRemaining)==null?void 0:We.avgMonths)>0?`${h.avgRemaining.avgMonths} bulan`:`${(($e=h.avgRemaining)==null?void 0:$e.avgDays)||0} hari`})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-red-500/30",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Expiring Soon"}),e.jsx("p",{className:"text-2xl font-bold text-red-400",children:h.expiringSoonMachines.length}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"< 90 hari"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-yellow-500/30",children:[e.jsx("p",{className:"text-slate-400 text-xs mb-1",children:"Warning"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:h.distribution.warning||0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"90-180 hari"})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìä"})," Warranty Status Overview"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"w-full h-6 bg-slate-700/50 rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-400 transition-all duration-500 flex items-center justify-center",style:{width:`${f}%`},children:f>=20&&e.jsxs("span",{className:"text-xs font-bold text-white",children:[f.toFixed(1),"%"]})}),e.jsx("div",{className:"absolute top-0 right-0 h-full bg-gradient-to-r from-red-500/80 to-red-400/80 transition-all duration-500 flex items-center justify-center",style:{width:`${100-f}%`},children:100-f>=20&&e.jsxs("span",{className:"text-xs font-bold text-white",children:[(100-f).toFixed(1),"%"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-lg p-4 hover:bg-green-500/20 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-400 text-2xl",children:"‚úÖ"}),e.jsx("span",{className:"text-sm text-green-300 font-semibold",children:"On Warranty"})]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-green-400",children:X.toLocaleString()}),e.jsx("span",{className:"text-lg text-green-300/70",children:"mesin"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-green-300/70",children:"Percentage"}),e.jsxs("span",{className:"text-green-400 font-bold",children:[f.toFixed(1),"%"]})]}),R&&R.avgMonths>0&&e.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-green-500/20",children:[e.jsx("span",{className:"text-green-300/70",children:"Avg. Remaining"}),e.jsxs("span",{className:"text-green-400 font-bold",children:[R.avgMonths," bulan"]})]})]})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 hover:bg-red-500/20 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-400 text-2xl",children:"‚ö†Ô∏è"}),e.jsx("span",{className:"text-sm text-red-300 font-semibold",children:"Expired"})]})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-4xl font-bold text-red-400",children:te.toLocaleString()}),e.jsx("span",{className:"text-lg text-red-300/70",children:"mesin"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-red-300/70",children:"Percentage"}),e.jsxs("span",{className:"text-red-400 font-bold",children:[(100-f).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs pt-2 border-t border-red-500/20",children:[e.jsx("span",{className:"text-red-300/70",children:"Status"}),e.jsx("span",{className:$("font-bold",100-f>70?"text-red-400":100-f>50?"text-yellow-400":"text-green-400"),children:100-f>70?"Critical":100-f>50?"High":"Normal"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-4 border-t border-slate-700",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-slate-200",children:M.toLocaleString()}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Total Mesin"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-400",children:X.toLocaleString()}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Aktif"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-400",children:te.toLocaleString()}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Expired"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Distribusi Sisa Waktu Warranty"}),e.jsx(F,{width:"100%",height:250,children:e.jsxs(de,{data:Object.entries(h.timeRanges).map(([t,s])=>({name:t,value:s})),children:[e.jsx(V,{dataKey:"name",tick:{fill:"#cbd5e1",fontSize:11}}),e.jsx(_,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #10b981",borderRadius:"8px"},labelStyle:{color:"#e2e8f0"}}),e.jsx(xe,{dataKey:"value",fill:"#10b981",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-red-400 font-semibold",children:"Critical"}),e.jsx("span",{className:"text-2xl font-bold text-red-400",children:h.distribution.critical||0})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Mesin dengan sisa < 90 hari"}),e.jsx("div",{className:"mt-2 w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500",style:{width:`${h.totalOnWarranty>0?h.distribution.critical/h.totalOnWarranty*100:0}%`}})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-yellow-400 font-semibold",children:"Warning"}),e.jsx("span",{className:"text-2xl font-bold text-yellow-400",children:h.distribution.warning||0})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Mesin dengan sisa 90-180 hari"}),e.jsx("div",{className:"mt-2 w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-500",style:{width:`${h.totalOnWarranty>0?h.distribution.warning/h.totalOnWarranty*100:0}%`}})})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-green-400 font-semibold",children:"Good"}),e.jsx("span",{className:"text-2xl font-bold text-green-400",children:h.distribution.good||0})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"Mesin dengan sisa > 180 hari"}),e.jsx("div",{className:"mt-2 w-full h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500",style:{width:`${h.totalOnWarranty>0?h.distribution.good/h.totalOnWarranty*100:0}%`}})})]})]}),h.expiringSoonMachines.length>0&&e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"‚ö†Ô∏è"})," Mesin yang Expiring Soon (Top 10)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left p-2 text-slate-400",children:"WSID"}),e.jsx("th",{className:"text-left p-2 text-slate-400",children:"Branch"}),e.jsx("th",{className:"text-left p-2 text-slate-400",children:"Customer"}),e.jsx("th",{className:"text-left p-2 text-slate-400",children:"Area"}),e.jsx("th",{className:"text-right p-2 text-slate-400",children:"Sisa Hari"}),e.jsx("th",{className:"text-right p-2 text-slate-400",children:"Status"})]})}),e.jsx("tbody",{children:h.expiringSoonMachines.map((t,s)=>e.jsxs("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[e.jsx("td",{className:"p-2 text-slate-200 font-mono text-xs",children:t.wsid}),e.jsx("td",{className:"p-2 text-slate-300",children:t.branch_name}),e.jsx("td",{className:"p-2 text-slate-300",children:t.customer}),e.jsx("td",{className:"p-2 text-slate-300",children:t.area_group}),e.jsx("td",{className:"p-2 text-right",children:e.jsxs("span",{className:"text-red-400 font-semibold",children:[t.warrantyInfo.days," hari"]})}),e.jsx("td",{className:"p-2 text-right",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-red-500/20 text-red-400",children:"Critical"})})]},s))})]})})]})]})]})})]})}const Wt=Object.freeze(Object.defineProperty({__proto__:null,default:kt},Symbol.toStringTag,{value:"Module"}));export{Wt as D,Pe as M};
